{"id": 17, "timestamp": "2026-01-06T15:53:15.413232", "source": "agent", "message": "I read the file /workspace/pallets__flask__2.0/tests/test_blueprints.py.", "cause": 16, "observation": "read", "tool_call_metadata": {"function_name": "str_replace_editor", "tool_call_id": "toolu_06", "model_response": {"id": "chatcmpl-804c17faef214d50a63d2fb3fb383a8c", "created": 1767714792, "model": "/mnt/shared/models/GLM-4.6-FP8", "object": "chat.completion", "system_fingerprint": null, "choices": [{"finish_reason": "stop", "index": 0, "message": {"content": "<think></think>\nLet me check the existing tests to understand the expected behavior and testing patterns:", "role": "assistant", "tool_calls": [{"index": 1, "function": {"arguments": "{\"command\": \"view\", \"path\": \"/workspace/pallets__flask__2.0/tests/test_blueprints.py\", \"security_risk\": \"LOW\"}", "name": "str_replace_editor"}, "id": "toolu_06", "type": "function"}], "function_call": null, "provider_specific_fields": null}}], "usage": {"completion_tokens": 70, "prompt_tokens": 0, "total_tokens": 70, "completion_tokens_details": {"accepted_prediction_tokens": null, "audio_tokens": null, "reasoning_tokens": 0, "rejected_prediction_tokens": null, "text_tokens": null, "image_tokens": null}, "prompt_tokens_details": null}}, "total_calls_in_response": 1}, "content": "Here's the result of running `cat -n` on /workspace/pallets__flask__2.0/tests/test_blueprints.py:\n     1\timport functools\n     2\t\n     3\timport pytest\n     4\tfrom jinja2 import TemplateNotFound\n     5\tfrom werkzeug.http import parse_cache_control_header\n     6\t\n     7\timport flask\n     8\t\n     9\t\n    10\tdef test_blueprint_specific_error_handling(app, client):\n    11\t    frontend = flask.Blueprint(\"frontend\", __name__)\n    12\t    backend = flask.Blueprint(\"backend\", __name__)\n    13\t    sideend = flask.Blueprint(\"sideend\", __name__)\n    14\t\n    15\t    @frontend.errorhandler(403)\n    16\t    def frontend_forbidden(e):\n    17\t        return \"frontend says no\", 403\n    18\t\n    19\t    @frontend.route(\"/frontend-no\")\n    20\t    def frontend_no():\n    21\t        flask.abort(403)\n    22\t\n    23\t    @backend.errorhandler(403)\n    24\t    def backend_forbidden(e):\n    25\t        return \"backend says no\", 403\n    26\t\n    27\t    @backend.route(\"/backend-no\")\n    28\t    def backend_no():\n    29\t        flask.abort(403)\n    30\t\n    31\t    @sideend.route(\"/what-is-a-sideend\")\n    32\t    def sideend_no():\n    33\t        flask.abort(403)\n    34\t\n    35\t    app.register_blueprint(frontend)\n    36\t    app.register_blueprint(backend)\n    37\t    app.register_blueprint(sideend)\n    38\t\n    39\t    @app.errorhandler(403)\n    40\t    def app_forbidden(e):\n    41\t        return \"application itself says no\", 403\n    42\t\n    43\t    assert client.get(\"/frontend-no\").data == b\"frontend says no\"\n    44\t    assert client.get(\"/backend-no\").data == b\"backend says no\"\n    45\t    assert client.get(\"/what-is-a-sideend\").data == b\"application itself says no\"\n    46\t\n    47\t\n    48\tdef test_blueprint_specific_user_error_handling(app, client):\n    49\t    class MyDecoratorException(Exception):\n    50\t        pass\n    51\t\n    52\t    class MyFunctionException(Exception):\n    53\t        pass\n    54\t\n    55\t    blue = flask.Blueprint(\"blue\", __name__)\n    56\t\n    57\t    @blue.errorhandler(MyDecoratorException)\n    58\t    def my_decorator_exception_handler(e):\n    59\t        assert isinstance(e, MyDecoratorException)\n    60\t        return \"boom\"\n    61\t\n    62\t    def my_function_exception_handler(e):\n    63\t        assert isinstance(e, MyFunctionException)\n    64\t        return \"bam\"\n    65\t\n    66\t    blue.register_error_handler(MyFunctionException, my_function_exception_handler)\n    67\t\n    68\t    @blue.route(\"/decorator\")\n    69\t    def blue_deco_test():\n    70\t        raise MyDecoratorException()\n    71\t\n    72\t    @blue.route(\"/function\")\n    73\t    def blue_func_test():\n    74\t        raise MyFunctionException()\n    75\t\n    76\t    app.register_blueprint(blue)\n    77\t\n    78\t    assert client.get(\"/decorator\").data == b\"boom\"\n    79\t    assert client.get(\"/function\").data == b\"bam\"\n    80\t\n    81\t\n    82\tdef test_blueprint_app_error_handling(app, client):\n    83\t    errors = flask.Blueprint(\"errors\", __name__)\n    84\t\n    85\t    @errors.app_errorhandler(403)\n    86\t    def forbidden_handler(e):\n    87\t        return \"you shall not pass\", 403\n    88\t\n    89\t    @app.route(\"/forbidden\")\n    90\t    def app_forbidden():\n    91\t        flask.abort(403)\n    92\t\n    93\t    forbidden_bp = flask.Blueprint(\"forbidden_bp\", __name__)\n    94\t\n    95\t    @forbidden_bp.route(\"/nope\")\n    96\t    def bp_forbidden():\n    97\t        flask.abort(403)\n    98\t\n    99\t    app.register_blueprint(errors)\n   100\t    app.register_blueprint(forbidden_bp)\n   101\t\n   102\t    assert client.get(\"/forbidden\").data == b\"you shall not pass\"\n   103\t    assert client.get(\"/nope\").data == b\"you shall not pass\"\n   104\t\n   105\t\n   106\t@pytest.mark.parametrize(\n   107\t    (\"prefix\", \"rule\", \"url\"),\n   108\t    (\n   109\t        (\"\", \"/\", \"/\"),\n   110\t        (\"/\", \"\", \"/\"),\n   111\t        (\"/\", \"/\", \"/\"),\n   112\t        (\"/foo\", \"\", \"/foo\"),\n   113\t        (\"/foo/\", \"\", \"/foo/\"),\n   114\t        (\"\", \"/bar\", \"/bar\"),\n   115\t        (\"/foo/\", \"/bar\", \"/foo/bar\"),\n   116\t        (\"/foo/\", \"bar\", \"/foo/bar\"),\n   117\t        (\"/foo\", \"/bar\", \"/foo/bar\"),\n   118\t        (\"/foo/\", \"//bar\", \"/foo/bar\"),\n   119\t        (\"/foo//\", \"/bar\", \"/foo/bar\"),\n   120\t    ),\n   121\t)\n   122\tdef test_blueprint_prefix_slash(app, client, prefix, rule, url):\n   123\t    bp = flask.Blueprint(\"test\", __name__, url_prefix=prefix)\n   124\t\n   125\t    @bp.route(rule)\n   126\t    def index():\n   127\t        return \"\", 204\n   128\t\n   129\t    app.register_blueprint(bp)\n   130\t    assert client.get(url).status_code == 204\n   131\t\n   132\t\n   133\tdef test_blueprint_url_defaults(app, client):\n   134\t    bp = flask.Blueprint(\"test\", __name__)\n   135\t\n   136\t    @bp.route(\"/foo\", defaults={\"baz\": 42})\n   137\t    def foo(bar, baz):\n   138\t        return f\"{bar}/{baz:d}\"\n   139\t\n   140\t    @bp.route(\"/bar\")\n   141\t    def bar(bar):\n   142\t        return str(bar)\n   143\t\n   144\t    app.register_blueprint(bp, url_prefix=\"/1\", url_defaults={\"bar\": 23})\n   145\t    app.register_blueprint(bp, url_prefix=\"/2\", url_defaults={\"bar\": 19})\n   146\t\n   147\t    assert client.get(\"/1/foo\").data == b\"23/42\"\n   148\t    assert client.get(\"/2/foo\").data == b\"19/42\"\n   149\t    assert client.get(\"/1/bar\").data == b\"23\"\n   150\t    assert client.get(\"/2/bar\").data == b\"19\"\n   151\t\n   152\t\n   153\tdef test_blueprint_url_processors(app, client):\n   154\t    bp = flask.Blueprint(\"frontend\", __name__, url_prefix=\"/<lang_code>\")\n   155\t\n   156\t    @bp.url_defaults\n   157\t    def add_language_code(endpoint, values):\n   158\t        values.setdefault(\"lang_code\", flask.g.lang_code)\n   159\t\n   160\t    @bp.url_value_preprocessor\n   161\t    def pull_lang_code(endpoint, values):\n   162\t        flask.g.lang_code = values.pop(\"lang_code\")\n   163\t\n   164\t    @bp.route(\"/\")\n   165\t    def index():\n   166\t        return flask.url_for(\".about\")\n   167\t\n   168\t    @bp.route(\"/about\")\n   169\t    def about():\n   170\t        return flask.url_for(\".index\")\n   171\t\n   172\t    app.register_blueprint(bp)\n   173\t\n   174\t    assert client.get(\"/de/\").data == b\"/de/about\"\n   175\t    assert client.get(\"/de/about\").data == b\"/de/\"\n   176\t\n   177\t\n   178\tdef test_templates_and_static(test_apps):\n   179\t    from blueprintapp import app\n   180\t\n   181\t    client = app.test_client()\n   182\t\n   183\t    rv = client.get(\"/\")\n   184\t    assert rv.data == b\"Hello from the Frontend\"\n   185\t    rv = client.get(\"/admin/\")\n   186\t    assert rv.data == b\"Hello from the Admin\"\n   187\t    rv = client.get(\"/admin/index2\")\n   188\t    assert rv.data == b\"Hello from the Admin\"\n   189\t    rv = client.get(\"/admin/static/test.txt\")\n   190\t    assert rv.data.strip() == b\"Admin File\"\n   191\t    rv.close()\n   192\t    rv = client.get(\"/admin/static/css/test.css\")\n   193\t    assert rv.data.strip() == b\"/* nested file */\"\n   194\t    rv.close()\n   195\t\n   196\t    # try/finally, in case other tests use this app for Blueprint tests.\n   197\t    max_age_default = app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"]\n   198\t    try:\n   199\t        expected_max_age = 3600\n   200\t        if app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"] == expected_max_age:\n   201\t            expected_max_age = 7200\n   202\t        app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"] = expected_max_age\n   203\t        rv = client.get(\"/admin/static/css/test.css\")\n   204\t        cc = parse_cache_control_header(rv.headers[\"Cache-Control\"])\n   205\t        assert cc.max_age == expected_max_age\n   206\t        rv.close()\n   207\t    finally:\n   208\t        app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"] = max_age_default\n   209\t\n   210\t    with app.test_request_context():\n   211\t        assert (\n   212\t            flask.url_for(\"admin.static\", filename=\"test.txt\")\n   213\t            == \"/admin/static/test.txt\"\n   214\t        )\n   215\t\n   216\t    with app.test_request_context():\n   217\t        with pytest.raises(TemplateNotFound) as e:\n   218\t            flask.render_template(\"missing.html\")\n   219\t        assert e.value.name == \"missing.html\"\n   220\t\n   221\t    with flask.Flask(__name__).test_request_context():\n   222\t        assert flask.render_template(\"nested/nested.txt\") == \"I'm nested\"\n   223\t\n   224\t\n   225\tdef test_default_static_max_age(app):\n   226\t    class MyBlueprint(flask.Blueprint):\n   227\t        def get_send_file_max_age(self, filename):\n   228\t            return 100\n   229\t\n   230\t    blueprint = MyBlueprint(\"blueprint\", __name__, static_folder=\"static\")\n   231\t    app.register_blueprint(blueprint)\n   232\t\n   233\t    # try/finally, in case other tests use this app for Blueprint tests.\n   234\t    max_age_default = app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"]\n   235\t    try:\n   236\t        with app.test_request_context():\n   237\t            unexpected_max_age = 3600\n   238\t            if app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"] == unexpected_max_age:\n   239\t                unexpected_max_age = 7200\n   240\t            app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"] = unexpected_max_age\n   241\t            rv = blueprint.send_static_file(\"index.html\")\n   242\t            cc = parse_cache_control_header(rv.headers[\"Cache-Control\"])\n   243\t            assert cc.max_age == 100\n   244\t            rv.close()\n   245\t    finally:\n   246\t        app.config[\"SEND_FILE_MAX_AGE_DEFAULT\"] = max_age_default\n   247\t\n   248\t\n   249\tdef test_templates_list(test_apps):\n   250\t    from blueprintapp import app\n   251\t\n   252\t    templates = sorted(app.jinja_env.list_templates())\n   253\t    assert templates == [\"admin/index.html\", \"frontend/index.html\"]\n   254\t\n   255\t\n   256\tdef test_dotted_names(app, client):\n   257\t    frontend = flask.Blueprint(\"myapp.frontend\", __name__)\n   258\t    backend = flask.Blueprint(\"myapp.backend\", __name__)\n   259\t\n   260\t    @frontend.route(\"/fe\")\n   261\t    def frontend_index():\n   262\t        return flask.url_for(\"myapp.backend.backend_index\")\n   263\t\n   264\t    @frontend.route(\"/fe2\")\n   265\t    def frontend_page2():\n   266\t        return flask.url_for(\".frontend_index\")\n   267\t\n   268\t    @backend.route(\"/be\")\n   269\t    def backend_index():\n   270\t        return flask.url_for(\"myapp.frontend.frontend_index\")\n   271\t\n   272\t    app.register_blueprint(frontend)\n   273\t    app.register_blueprint(backend)\n   274\t\n   275\t    assert client.get(\"/fe\").data.strip() == b\"/be\"\n   276\t    assert client.get(\"/fe2\").data.strip() == b\"/fe\"\n   277\t    assert client.get(\"/be\").data.strip() == b\"/fe\"\n   278\t\n   279\t\n   280\tdef test_dotted_names_from_app(app, client):\n   281\t    test = flask.Blueprint(\"test\", __name__)\n   282\t\n   283\t    @app.route(\"/\")\n   284\t    def app_index():\n   285\t        return flask.url_for(\"test.index\")\n   286\t\n   287\t    @test.route(\"/test/\")\n   288\t    def index():\n   289\t        return flask.url_for(\"app_index\")\n   290\t\n   291\t    app.register_blueprint(test)\n   292\t\n   293\t    rv = client.get(\"/\")\n   294\t    assert rv.data == b\"/test/\"\n   295\t\n   296\t\n   297\tdef test_empty_url_defaults(app, client):\n   298\t    bp = flask.Blueprint(\"bp\", __name__)\n   299\t\n   300\t    @bp.route(\"/\", defaults={\"page\": 1})\n   301\t    @bp.route(\"/page/<int:page>\")\n   302\t    def something(page):\n   303\t        return str(page)\n   304\t\n   305\t    app.register_blueprint(bp)\n   306\t\n   307\t    assert client.get(\"/\").data == b\"1\"\n   308\t    assert client.get(\"/page/2\").data == b\"2\"\n   309\t\n   310\t\n   311\tdef test_route_decorator_custom_endpoint(app, client):\n   312\t    bp = flask.Blueprint(\"bp\", __name__)\n   313\t\n   314\t    @bp.route(\"/foo\")\n   315\t    def foo():\n   316\t        return flask.request.endpoint\n   317\t\n   318\t    @bp.route(\"/bar\", endpoint=\"bar\")\n   319\t    def foo_bar():\n   320\t        return flask.request.endpoint\n   321\t\n   322\t    @bp.route(\"/bar/123\", endpoint=\"123\")\n   323\t    def foo_bar_foo():\n   324\t        return flask.request.endpoint\n   325\t\n   326\t    @bp.route(\"/bar/foo\")\n   327\t    def bar_foo():\n   328\t        return flask.request.endpoint\n   329\t\n   330\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   331\t\n   332\t    @app.route(\"/\")\n   333\t    def index():\n   334\t        return flask.request.endpoint\n   335\t\n   336\t    assert client.get(\"/\").data == b\"index\"\n   337\t    assert client.get(\"/py/foo\").data == b\"bp.foo\"\n   338\t    assert client.get(\"/py/bar\").data == b\"bp.bar\"\n   339\t    assert client.get(\"/py/bar/123\").data == b\"bp.123\"\n   340\t    assert client.get(\"/py/bar/foo\").data == b\"bp.bar_foo\"\n   341\t\n   342\t\n   343\tdef test_route_decorator_custom_endpoint_with_dots(app, client):\n   344\t    bp = flask.Blueprint(\"bp\", __name__)\n   345\t\n   346\t    @bp.route(\"/foo\")\n   347\t    def foo():\n   348\t        return flask.request.endpoint\n   349\t\n   350\t    try:\n   351\t\n   352\t        @bp.route(\"/bar\", endpoint=\"bar.bar\")\n   353\t        def foo_bar():\n   354\t            return flask.request.endpoint\n   355\t\n   356\t    except AssertionError:\n   357\t        pass\n   358\t    else:\n   359\t        raise AssertionError(\"expected AssertionError not raised\")\n   360\t\n   361\t    try:\n   362\t\n   363\t        @bp.route(\"/bar/123\", endpoint=\"bar.123\")\n   364\t        def foo_bar_foo():\n   365\t            return flask.request.endpoint\n   366\t\n   367\t    except AssertionError:\n   368\t        pass\n   369\t    else:\n   370\t        raise AssertionError(\"expected AssertionError not raised\")\n   371\t\n   372\t    def foo_foo_foo():\n   373\t        pass\n   374\t\n   375\t    pytest.raises(\n   376\t        AssertionError,\n   377\t        lambda: bp.add_url_rule(\"/bar/123\", endpoint=\"bar.123\", view_func=foo_foo_foo),\n   378\t    )\n   379\t\n   380\t    pytest.raises(\n   381\t        AssertionError, bp.route(\"/bar/123\", endpoint=\"bar.123\"), lambda: None\n   382\t    )\n   383\t\n   384\t    foo_foo_foo.__name__ = \"bar.123\"\n   385\t\n   386\t    pytest.raises(\n   387\t        AssertionError, lambda: bp.add_url_rule(\"/bar/123\", view_func=foo_foo_foo)\n   388\t    )\n   389\t\n   390\t    bp.add_url_rule(\n   391\t        \"/bar/456\", endpoint=\"foofoofoo\", view_func=functools.partial(foo_foo_foo)\n   392\t    )\n   393\t\n   394\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   395\t\n   396\t    assert client.get(\"/py/foo\").data == b\"bp.foo\"\n   397\t    # The rule's didn't actually made it through\n   398\t    rv = client.get(\"/py/bar\")\n   399\t    assert rv.status_code == 404\n   400\t    rv = client.get(\"/py/bar/123\")\n   401\t    assert rv.status_code == 404\n   402\t\n   403\t\n   404\tdef test_endpoint_decorator(app, client):\n   405\t    from werkzeug.routing import Rule\n   406\t\n   407\t    app.url_map.add(Rule(\"/foo\", endpoint=\"bar\"))\n   408\t\n   409\t    bp = flask.Blueprint(\"bp\", __name__)\n   410\t\n   411\t    @bp.endpoint(\"bar\")\n   412\t    def foobar():\n   413\t        return flask.request.endpoint\n   414\t\n   415\t    app.register_blueprint(bp, url_prefix=\"/bp_prefix\")\n   416\t\n   417\t    assert client.get(\"/foo\").data == b\"bar\"\n   418\t    assert client.get(\"/bp_prefix/bar\").status_code == 404\n   419\t\n   420\t\n   421\tdef test_template_filter(app):\n   422\t    bp = flask.Blueprint(\"bp\", __name__)\n   423\t\n   424\t    @bp.app_template_filter()\n   425\t    def my_reverse(s):\n   426\t        return s[::-1]\n   427\t\n   428\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   429\t    assert \"my_reverse\" in app.jinja_env.filters.keys()\n   430\t    assert app.jinja_env.filters[\"my_reverse\"] == my_reverse\n   431\t    assert app.jinja_env.filters[\"my_reverse\"](\"abcd\") == \"dcba\"\n   432\t\n   433\t\n   434\tdef test_add_template_filter(app):\n   435\t    bp = flask.Blueprint(\"bp\", __name__)\n   436\t\n   437\t    def my_reverse(s):\n   438\t        return s[::-1]\n   439\t\n   440\t    bp.add_app_template_filter(my_reverse)\n   441\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   442\t    assert \"my_reverse\" in app.jinja_env.filters.keys()\n   443\t    assert app.jinja_env.filters[\"my_reverse\"] == my_reverse\n   444\t    assert app.jinja_env.filters[\"my_reverse\"](\"abcd\") == \"dcba\"\n   445\t\n   446\t\n   447\tdef test_template_filter_with_name(app):\n   448\t    bp = flask.Blueprint(\"bp\", __name__)\n   449\t\n   450\t    @bp.app_template_filter(\"strrev\")\n   451\t    def my_reverse(s):\n   452\t        return s[::-1]\n   453\t\n   454\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   455\t    assert \"strrev\" in app.jinja_env.filters.keys()\n   456\t    assert app.jinja_env.filters[\"strrev\"] == my_reverse\n   457\t    assert app.jinja_env.filters[\"strrev\"](\"abcd\") == \"dcba\"\n   458\t\n   459\t\n   460\tdef test_add_template_filter_with_name(app):\n   461\t    bp = flask.Blueprint(\"bp\", __name__)\n   462\t\n   463\t    def my_reverse(s):\n   464\t        return s[::-1]\n   465\t\n   466\t    bp.add_app_template_filter(my_reverse, \"strrev\")\n   467\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   468\t    assert \"strrev\" in app.jinja_env.filters.keys()\n   469\t    assert app.jinja_env.filters[\"strrev\"] == my_reverse\n   470\t    assert app.jinja_env.filters[\"strrev\"](\"abcd\") == \"dcba\"\n   471\t\n   472\t\n   473\tdef test_template_filter_with_template(app, client):\n   474\t    bp = flask.Blueprint(\"bp\", __name__)\n   475\t\n   476\t    @bp.app_template_filter()\n   477\t    def super_reverse(s):\n   478\t        return s[::-1]\n   479\t\n   480\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   481\t\n   482\t    @app.route(\"/\")\n   483\t    def index():\n   484\t        return flask.render_template(\"template_filter.html\", value=\"abcd\")\n   485\t\n   486\t    rv = client.get(\"/\")\n   487\t    assert rv.data == b\"dcba\"\n   488\t\n   489\t\n   490\tdef test_template_filter_after_route_with_template(app, client):\n   491\t    @app.route(\"/\")\n   492\t    def index():\n   493\t        return flask.render_template(\"template_filter.html\", value=\"abcd\")\n   494\t\n   495\t    bp = flask.Blueprint(\"bp\", __name__)\n   496\t\n   497\t    @bp.app_template_filter()\n   498\t    def super_reverse(s):\n   499\t        return s[::-1]\n   500\t\n   501\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   502\t    rv = client.get(\"/\")\n   503\t    assert rv.data == b\"dcba\"\n   504\t\n   505\t\n   506\tdef test_add_template_filter_with_template(app, client):\n   507\t    bp = flask.Blueprint(\"bp\", __name__)\n   508\t\n   509\t    def super_reverse(s):\n   510\t        return s[::-1]\n   511\t\n   512\t    bp.add_app_template_filter(super_reverse)\n   513\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   514\t\n   515\t    @app.route(\"/\")\n   516\t    def index():\n   517\t        return flask.render_template(\"template_filter.html\", value=\"abcd\")\n   518\t\n   519\t    rv = client.get(\"/\")\n   520\t    assert rv.data == b\"dcba\"\n   521\t\n   522\t\n   523\tdef test_template_filter_with_name_and_template(app, client):\n   524\t    bp = flask.Blueprint(\"bp\", __name__)\n   525\t\n   526\t    @bp.app_template_filter(\"super_reverse\")\n   527\t    def my_reverse(s):\n   528\t        return s[::-1]\n   529\t\n   530\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   531\t\n   532\t    @app.route(\"/\")\n   533\t    def index():\n   534\t        return flask.render_template(\"template_filter.html\", value=\"abcd\")\n   535\t\n   536\t    rv = client.get(\"/\")\n   537\t    assert rv.data == b\"dcba\"\n   538\t\n   539\t\n   540\tdef test_add_template_filter_with_name_and_template(app, client):\n   541\t    bp = flask.Blueprint(\"bp\", __name__)\n   542\t\n   543\t    def my_reverse(s):\n   544\t        return s[::-1]\n   545\t\n   546\t    bp.add_app_template_filter(my_reverse, \"super_reverse\")\n   547\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   548\t\n   549\t    @app.route(\"/\")\n   550\t    def index():\n   551\t        return flask.render_template(\"template_filter.html\", value=\"abcd\")\n   552\t\n   553\t    rv = client.get(\"/\")\n   554\t    assert rv.data == b\"dcba\"\n   555\t\n   556\t\n   557\tdef test_template_test(app):\n   558\t    bp = flask.Blueprint(\"bp\", __name__)\n   559\t\n   560\t    @bp.app_template_test()\n   561\t    def is_boolean(value):\n   562\t        return isinstance(value, bool)\n   563\t\n   564\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   565\t    assert \"is_boolean\" in app.jinja_env.tests.keys()\n   566\t    assert app.jinja_env.tests[\"is_boolean\"] == is_boolean\n   567\t    assert app.jinja_env.tests[\"is_boolean\"](False)\n   568\t\n   569\t\n   570\tdef test_add_template_test(app):\n   571\t    bp = flask.Blueprint(\"bp\", __name__)\n   572\t\n   573\t    def is_boolean(value):\n   574\t        return isinstance(value, bool)\n   575\t\n   576\t    bp.add_app_template_test(is_boolean)\n   577\t    app.register_blueprint(bp, url_prefix=\"/py\")\n   578\t    assert \"is_boole<response clipped><NOTE>Due to the max output limit, only part of this file has been shown to you. You should retry this tool after you have searched inside the file with `grep -n` in order to find the line numbers of what you are looking for.</NOTE>\n", "extras": {"path": "/workspace/pallets__flask__2.0/tests/test_blueprints.py", "impl_source": "oh_aci"}}