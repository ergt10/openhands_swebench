{"id": 31, "timestamp": "2026-01-06T14:37:17.218089", "source": "agent", "message": "I edited the file /workspace/django__django__3.1/test_year_issue.py.", "cause": 30, "observation": "edit", "tool_call_metadata": {"function_name": "str_replace_editor", "tool_call_id": "toolu_13", "model_response": {"id": "chatcmpl-c3a7e598601e4ffe9ee30b0a3ae15d3e", "created": 1767710140, "model": "/mnt/shared/models/GLM-4.6-FP8", "object": "chat.completion", "system_fingerprint": null, "choices": [{"finish_reason": "stop", "index": 0, "message": {"content": "<think></think>\nPerfect! Now I can see the issue clearly. The current behavior shows that year '70' is being parsed as 1970, but according to RFC 7231, it should be parsed as 2070 because 2070 is only 44 years in the future from 2026 (current year), which is less than 50 years.\n\n## Phase 4. TEST CREATION: Creating a comprehensive test\n\nLet me create a more comprehensive test that demonstrates the issue and will verify our fix:", "role": "assistant", "tool_calls": [{"index": 1, "function": {"arguments": "{\"command\": \"str_replace\", \"path\": \"/workspace/django__django__3.1/test_year_issue.py\", \"old_str\": \"#!/usr/bin/env python\\n\\\"\\\"\\\"\\nTest script to reproduce the two-digit year issue in parse_http_date.\\n\\\"\\\"\\\"\\nimport datetime\\nimport sys\\nimport os\\n\\n# Add the django path to sys.path\\nsys.path.insert(0, '/workspace/django__django__3.1')\\n\\n# Import the function we need to test\\nfrom django.utils.http import parse_http_date\\n\\ndef test_current_behavior():\\n    \\\"\\\"\\\"Test the current behavior of two-digit year parsing.\\\"\\\"\\\"\\n    print(\\\"=== Current Behavior Test ===\\\")\\n    \\n    # Test cases with two-digit years\\n    test_cases = [\\n        ('Sunday, 06-Nov-69 08:49:37 GMT', '69'),  # Should be 2069\\n        ('Sunday, 06-Nov-70 08:49:37 GMT', '70'),  # Should be 1970\\n        ('Sunday, 06-Nov-99 08:49:37 GMT', '99'),  # Should be 1999\\n        ('Sunday, 06-Nov-00 08:49:37 GMT', '00'),  # Should be 2000\\n        ('Sunday, 06-Nov-50 08:49:37 GMT', '50'),  # Should be 2050\\n        ('Sunday, 06-Nov-25 08:49:37 GMT', '25'),  # Should be 2025\\n    ]\\n    \\n    for date_str, year_str in test_cases:\\n        try:\\n            timestamp = parse_http_date(date_str)\\n            dt = datetime.datetime.utcfromtimestamp(timestamp)\\n            print(f\\\"Input: {year_str} -> Parsed as: {dt.year}\\\")\\n        except Exception as e:\\n            print(f\\\"Input: {year_str} -> Error: {e}\\\")\\n\\ndef test_rfc_compliant_behavior():\\n    \\\"\\\"\\\"Test what RFC 7231 compliant behavior should be.\\\"\\\"\\\"\\n    print(\\\"\\\\n=== RFC 7231 Compliant Behavior (Expected) ===\\\")\\n    \\n    current_year = datetime.datetime.now().year\\n    current_century = current_year // 100 * 100\\n    current_two_digit = current_year % 100\\n    \\n    print(f\\\"Current year: {current_year}\\\")\\n    print(f\\\"Current two-digit year: {current_two_digit}\\\")\\n    \\n    # Test cases with two-digit years\\n    test_cases = ['69', '70', '99', '00', '50', '25']\\n    \\n    for year_str in test_cases:\\n        year_int = int(year_str)\\n        \\n        # RFC 7231 logic: interpret as most recent year in past if >50 years in future\\n        candidate_year = current_century + year_int\\n        if candidate_year - current_year > 50:\\n            candidate_year -= 100\\n            \\n        print(f\\\"Input: {year_str} -> Should be: {candidate_year}\\\")\\n\\nif __name__ == '__main__':\\n    test_current_behavior()\\n    test_rfc_compliant_behavior()\", \"new_str\": \"#!/usr/bin/env python\\n\\\"\\\"\\\"\\nTest script to reproduce the two-digit year issue in parse_http_date.\\n\\\"\\\"\\\"\\nimport datetime\\nimport sys\\nimport os\\n\\n# Add the django path to sys.path\\nsys.path.insert(0, '/workspace/django__django__3.1')\\n\\n# Import the function we need to test\\nfrom django.utils.http import parse_http_date\\n\\ndef calculate_rfc_compliant_year(two_digit_year):\\n    \\\"\\\"\\\"Calculate RFC 7231 compliant year from two-digit year.\\\"\\\"\\\"\\n    current_year = datetime.datetime.now().year\\n    current_century = current_year // 100 * 100\\n    candidate_year = current_century + two_digit_year\\n    \\n    # RFC 7231: interpret as most recent year in past if >50 years in future\\n    if candidate_year - current_year > 50:\\n        candidate_year -= 100\\n        \\n    return candidate_year\\n\\ndef test_current_vs_expected():\\n    \\\"\\\"\\\"Test current behavior vs expected RFC 7231 compliant behavior.\\\"\\\"\\\"\\n    print(\\\"=== Current vs Expected Behavior Test ===\\\")\\n    \\n    current_year = datetime.datetime.now().year\\n    print(f\\\"Current year: {current_year}\\\")\\n    print()\\n    \\n    # Test cases with two-digit years\\n    test_cases = [\\n        ('Sunday, 06-Nov-69 08:49:37 GMT', 69),\\n        ('Sunday, 06-Nov-70 08:49:37 GMT', 70),\\n        ('Sunday, 06-Nov-99 08:49:37 GMT', 99),\\n        ('Sunday, 06-Nov-00 08:49:37 GMT', 0),\\n        ('Sunday, 06-Nov-50 08:49:37 GMT', 50),\\n        ('Sunday, 06-Nov-25 08:49:37 GMT', 25),\\n        ('Sunday, 06-Nov-80 08:49:37 GMT', 80),\\n        ('Sunday, 06-Nov-85 08:49:37 GMT', 85),\\n    ]\\n    \\n    issues_found = []\\n    \\n    for date_str, two_digit_year in test_cases:\\n        try:\\n            timestamp = parse_http_date(date_str)\\n            dt = datetime.datetime.utcfromtimestamp(timestamp)\\n            actual_year = dt.year\\n            expected_year = calculate_rfc_compliant_year(two_digit_year)\\n            \\n            status = \\\"\\u2713\\\" if actual_year == expected_year else \\\"\\u2717\\\"\\n            print(f\\\"Input: {two_digit_year:02d} -> Current: {actual_year} | Expected: {expected_year} {status}\\\")\\n            \\n            if actual_year != expected_year:\\n                issues_found.append((two_digit_year, actual_year, expected_year))\\n                \\n        except Exception as e:\\n            print(f\\\"Input: {two_digit_year:02d} -> Error: {e}\\\")\\n    \\n    print()\\n    if issues_found:\\n        print(\\\"Issues found:\\\")\\n        for two_digit, actual, expected in issues_found:\\n            print(f\\\"  Year {two_digit:02d}: got {actual}, expected {expected}\\\")\\n    else:\\n        print(\\\"No issues found - implementation is RFC 7231 compliant!\\\")\\n    \\n    return len(issues_found) == 0\\n\\ndef test_edge_cases():\\n    \\\"\\\"\\\"Test edge cases around the 50-year boundary.\\\"\\\"\\\"\\n    print(\\\"\\\\n=== Edge Case Test ===\\\")\\n    \\n    current_year = datetime.datetime.now().year\\n    print(f\\\"Current year: {current_year}\\\")\\n    \\n    # Test years around the 50-year boundary\\n    boundary_year = (current_year + 50) % 100\\n    print(f\\\"50-year boundary two-digit year: {boundary_year:02d}\\\")\\n    \\n    test_years = [boundary_year - 2, boundary_year - 1, boundary_year, boundary_year + 1, boundary_year + 2]\\n    \\n    for two_digit_year in test_years:\\n        if 0 <= two_digit_year <= 99:\\n            date_str = f'Sunday, 06-Nov-{two_digit_year:02d} 08:49:37 GMT'\\n            try:\\n                timestamp = parse_http_date(date_str)\\n                dt = datetime.datetime.utcfromtimestamp(timestamp)\\n                actual_year = dt.year\\n                expected_year = calculate_rfc_compliant_year(two_digit_year)\\n                \\n                status = \\\"\\u2713\\\" if actual_year == expected_year else \\\"\\u2717\\\"\\n                print(f\\\"Year {two_digit_year:02d}: {actual_year} vs {expected_year} {status}\\\")\\n                \\n            except Exception as e:\\n                print(f\\\"Year {two_digit_year:02d}: Error - {e}\\\")\\n\\nif __name__ == '__main__':\\n    success = test_current_vs_expected()\\n    test_edge_cases()\\n    \\n    if not success:\\n        print(\\\"\\\\n\\u274c Implementation needs to be fixed to be RFC 7231 compliant\\\")\\n        sys.exit(1)\\n    else:\\n        print(\\\"\\\\n\\u2705 Implementation is RFC 7231 compliant\\\")\\n        sys.exit(0)\", \"security_risk\": \"LOW\"}", "name": "str_replace_editor"}, "id": "toolu_13", "type": "function"}], "function_call": null, "provider_specific_fields": null}}], "usage": {"completion_tokens": 1790, "prompt_tokens": 0, "total_tokens": 1790, "completion_tokens_details": {"accepted_prediction_tokens": null, "audio_tokens": null, "reasoning_tokens": 0, "rejected_prediction_tokens": null, "text_tokens": null, "image_tokens": null}, "prompt_tokens_details": null}}, "total_calls_in_response": 1}, "content": "The file /workspace/django__django__3.1/test_year_issue.py has been edited. Here's the result of running `cat -n` on a snippet of /workspace/django__django__3.1/test_year_issue.py:\n     1\t#!/usr/bin/env python\n     2\t\"\"\"\n     3\tTest script to reproduce the two-digit year issue in parse_http_date.\n     4\t\"\"\"\n     5\timport datetime\n     6\timport sys\n     7\timport os\n     8\t\n     9\t# Add the django path to sys.path\n    10\tsys.path.insert(0, '/workspace/django__django__3.1')\n    11\t\n    12\t# Import the function we need to test\n    13\tfrom django.utils.http import parse_http_date\n    14\t\n    15\tdef calculate_rfc_compliant_year(two_digit_year):\n    16\t    \"\"\"Calculate RFC 7231 compliant year from two-digit year.\"\"\"\n    17\t    current_year = datetime.datetime.now().year\n    18\t    current_century = current_year // 100 * 100\n    19\t    candidate_year = current_century + two_digit_year\n    20\t    \n    21\t    # RFC 7231: interpret as most recent year in past if >50 years in future\n    22\t    if candidate_year - current_year > 50:\n    23\t        candidate_year -= 100\n    24\t        \n    25\t    return candidate_year\n    26\t\n    27\tdef test_current_vs_expected():\n    28\t    \"\"\"Test current behavior vs expected RFC 7231 compliant behavior.\"\"\"\n    29\t    print(\"=== Current vs Expected Behavior Test ===\")\n    30\t    \n    31\t    current_year = datetime.datetime.now().year\n    32\t    print(f\"Current year: {current_year}\")\n    33\t    print()\n    34\t    \n    35\t    # Test cases with two-digit years\n    36\t    test_cases = [\n    37\t        ('Sunday, 06-Nov-69 08:49:37 GMT', 69),\n    38\t        ('Sunday, 06-Nov-70 08:49:37 GMT', 70),\n    39\t        ('Sunday, 06-Nov-99 08:49:37 GMT', 99),\n    40\t        ('Sunday, 06-Nov-00 08:49:37 GMT', 0),\n    41\t        ('Sunday, 06-Nov-50 08:49:37 GMT', 50),\n    42\t        ('Sunday, 06-Nov-25 08:49:37 GMT', 25),\n    43\t        ('Sunday, 06-Nov-80 08:49:37 GMT', 80),\n    44\t        ('Sunday, 06-Nov-85 08:49:37 GMT', 85),\n    45\t    ]\n    46\t    \n    47\t    issues_found = []\n    48\t    \n    49\t    for date_str, two_digit_year in test_cases:\n    50\t        try:\n    51\t            timestamp = parse_http_date(date_str)\n    52\t            dt = datetime.datetime.utcfromtimestamp(timestamp)\n    53\t            actual_year = dt.year\n    54\t            expected_year = calculate_rfc_compliant_year(two_digit_year)\n    55\t            \n    56\t            status = \"\u2713\" if actual_year == expected_year else \"\u2717\"\n    57\t            print(f\"Input: {two_digit_year:02d} -> Current: {actual_year} | Expected: {expected_year} {status}\")\n    58\t            \n    59\t            if actual_year != expected_year:\n    60\t                issues_found.append((two_digit_year, actual_year, expected_year))\n    61\t                \n    62\t        except Exception as e:\n    63\t            print(f\"Input: {two_digit_year:02d} -> Error: {e}\")\n    64\t    \n    65\t    print()\n    66\t    if issues_found:\n    67\t        print(\"Issues found:\")\n    68\t        for two_digit, actual, expected in issues_found:\n    69\t            print(f\"  Year {two_digit:02d}: got {actual}, expected {expected}\")\n    70\t    else:\n    71\t        print(\"No issues found - implementation is RFC 7231 compliant!\")\n    72\t    \n    73\t    return len(issues_found) == 0\n    74\t\n    75\tdef test_edge_cases():\n    76\t    \"\"\"Test edge cases around the 50-year boundary.\"\"\"\n    77\t    print(\"\\n=== Edge Case Test ===\")\n    78\t    \n    79\t    current_year = datetime.datetime.now().year\n    80\t    print(f\"Current year: {current_year}\")\n    81\t    \n    82\t    # Test years around the 50-year boundary\n    83\t    boundary_year = (current_year + 50) % 100\n    84\t    print(f\"50-year boundary two-digit year: {boundary_year:02d}\")\n    85\t    \n    86\t    test_years = [boundary_year - 2, boundary_year - 1, boundary_year, boundary_year + 1, boundary_year + 2]\n    87\t    \n    88\t    for two_digit_year in test_years:\n    89\t        if 0 <= two_digit_year <= 99:\n    90\t            date_str = f'Sunday, 06-Nov-{two_digit_year:02d} 08:49:37 GMT'\n    91\t            try:\n    92\t                timestamp = parse_http_date(date_str)\n    93\t                dt = datetime.datetime.utcfromtimestamp(timestamp)\n    94\t                actual_year = dt.year\n    95\t                expected_year = calculate_rfc_compliant_year(two_digit_year)\n    96\t                \n    97\t                status = \"\u2713\" if actual_year == expected_year else \"\u2717\"\n    98\t                print(f\"Year {two_digit_year:02d}: {actual_year} vs {expected_year} {status}\")\n    99\t                \n   100\t            except Exception as e:\n   101\t                print(f\"Year {two_digit_year:02d}: Error - {e}\")\n   102\t\n   103\tif __name__ == '__main__':\n   104\t    success = test_current_vs_expected()\n   105\t    test_edge_cases()\n   106\t    \n   107\t    if not success:\n   108\t        print(\"\\n\u274c Implementation needs to be fixed to be RFC 7231 compliant\")\n   109\t        sys.exit(1)\n   110\t    else:\n   111\t        print(\"\\n\u2705 Implementation is RFC 7231 compliant\")\n   112\t        sys.exit(0)\n   113\t\nReview the changes and make sure they are as expected. Edit the file again if necessary.", "extras": {"path": "/workspace/django__django__3.1/test_year_issue.py", "prev_exist": false, "old_content": "#!/usr/bin/env python\n\"\"\"\nTest script to reproduce the two-digit year issue in parse_http_date.\n\"\"\"\nimport datetime\nimport sys\nimport os\n\n# Add the django path to sys.path\nsys.path.insert(0, '/workspace/django__django__3.1')\n\n# Import the function we need to test\nfrom django.utils.http import parse_http_date\n\ndef test_current_behavior():\n    \"\"\"Test the current behavior of two-digit year parsing.\"\"\"\n    print(\"=== Current Behavior Test ===\")\n    \n    # Test cases with two-digit years\n    test_cases = [\n        ('Sunday, 06-Nov-69 08:49:37 GMT', '69'),  # Should be 2069\n        ('Sunday, 06-Nov-70 08:49:37 GMT', '70'),  # Should be 1970\n        ('Sunday, 06-Nov-99 08:49:37 GMT', '99'),  # Should be 1999\n        ('Sunday, 06-Nov-00 08:49:37 GMT', '00'),  # Should be 2000\n        ('Sunday, 06-Nov-50 08:49:37 GMT', '50'),  # Should be 2050\n        ('Sunday, 06-Nov-25 08:49:37 GMT', '25'),  # Should be 2025\n    ]\n    \n    for date_str, year_str in test_cases:\n        try:\n            timestamp = parse_http_date(date_str)\n            dt = datetime.datetime.utcfromtimestamp(timestamp)\n            print(f\"Input: {year_str} -> Parsed as: {dt.year}\")\n        except Exception as e:\n            print(f\"Input: {year_str} -> Error: {e}\")\n\ndef test_rfc_compliant_behavior():\n    \"\"\"Test what RFC 7231 compliant behavior should be.\"\"\"\n    print(\"\\n=== RFC 7231 Compliant Behavior (Expected) ===\")\n    \n    current_year = datetime.datetime.now().year\n    current_century = current_year // 100 * 100\n    current_two_digit = current_year % 100\n    \n    print(f\"Current year: {current_year}\")\n    print(f\"Current two-digit year: {current_two_digit}\")\n    \n    # Test cases with two-digit years\n    test_cases = ['69', '70', '99', '00', '50', '25']\n    \n    for year_str in test_cases:\n        year_int = int(year_str)\n        \n        # RFC 7231 logic: interpret as most recent year in past if >50 years in future\n        candidate_year = current_century + year_int\n        if candidate_year - current_year > 50:\n            candidate_year -= 100\n            \n        print(f\"Input: {year_str} -> Should be: {candidate_year}\")\n\nif __name__ == '__main__':\n    test_current_behavior()\n    test_rfc_compliant_behavior()", "new_content": "#!/usr/bin/env python\n\"\"\"\nTest script to reproduce the two-digit year issue in parse_http_date.\n\"\"\"\nimport datetime\nimport sys\nimport os\n\n# Add the django path to sys.path\nsys.path.insert(0, '/workspace/django__django__3.1')\n\n# Import the function we need to test\nfrom django.utils.http import parse_http_date\n\ndef calculate_rfc_compliant_year(two_digit_year):\n    \"\"\"Calculate RFC 7231 compliant year from two-digit year.\"\"\"\n    current_year = datetime.datetime.now().year\n    current_century = current_year // 100 * 100\n    candidate_year = current_century + two_digit_year\n    \n    # RFC 7231: interpret as most recent year in past if >50 years in future\n    if candidate_year - current_year > 50:\n        candidate_year -= 100\n        \n    return candidate_year\n\ndef test_current_vs_expected():\n    \"\"\"Test current behavior vs expected RFC 7231 compliant behavior.\"\"\"\n    print(\"=== Current vs Expected Behavior Test ===\")\n    \n    current_year = datetime.datetime.now().year\n    print(f\"Current year: {current_year}\")\n    print()\n    \n    # Test cases with two-digit years\n    test_cases = [\n        ('Sunday, 06-Nov-69 08:49:37 GMT', 69),\n        ('Sunday, 06-Nov-70 08:49:37 GMT', 70),\n        ('Sunday, 06-Nov-99 08:49:37 GMT', 99),\n        ('Sunday, 06-Nov-00 08:49:37 GMT', 0),\n        ('Sunday, 06-Nov-50 08:49:37 GMT', 50),\n        ('Sunday, 06-Nov-25 08:49:37 GMT', 25),\n        ('Sunday, 06-Nov-80 08:49:37 GMT', 80),\n        ('Sunday, 06-Nov-85 08:49:37 GMT', 85),\n    ]\n    \n    issues_found = []\n    \n    for date_str, two_digit_year in test_cases:\n        try:\n            timestamp = parse_http_date(date_str)\n            dt = datetime.datetime.utcfromtimestamp(timestamp)\n            actual_year = dt.year\n            expected_year = calculate_rfc_compliant_year(two_digit_year)\n            \n            status = \"\u2713\" if actual_year == expected_year else \"\u2717\"\n            print(f\"Input: {two_digit_year:02d} -> Current: {actual_year} | Expected: {expected_year} {status}\")\n            \n            if actual_year != expected_year:\n                issues_found.append((two_digit_year, actual_year, expected_year))\n                \n        except Exception as e:\n            print(f\"Input: {two_digit_year:02d} -> Error: {e}\")\n    \n    print()\n    if issues_found:\n        print(\"Issues found:\")\n        for two_digit, actual, expected in issues_found:\n            print(f\"  Year {two_digit:02d}: got {actual}, expected {expected}\")\n    else:\n        print(\"No issues found - implementation is RFC 7231 compliant!\")\n    \n    return len(issues_found) == 0\n\ndef test_edge_cases():\n    \"\"\"Test edge cases around the 50-year boundary.\"\"\"\n    print(\"\\n=== Edge Case Test ===\")\n    \n    current_year = datetime.datetime.now().year\n    print(f\"Current year: {current_year}\")\n    \n    # Test years around the 50-year boundary\n    boundary_year = (current_year + 50) % 100\n    print(f\"50-year boundary two-digit year: {boundary_year:02d}\")\n    \n    test_years = [boundary_year - 2, boundary_year - 1, boundary_year, boundary_year + 1, boundary_year + 2]\n    \n    for two_digit_year in test_years:\n        if 0 <= two_digit_year <= 99:\n            date_str = f'Sunday, 06-Nov-{two_digit_year:02d} 08:49:37 GMT'\n            try:\n                timestamp = parse_http_date(date_str)\n                dt = datetime.datetime.utcfromtimestamp(timestamp)\n                actual_year = dt.year\n                expected_year = calculate_rfc_compliant_year(two_digit_year)\n                \n                status = \"\u2713\" if actual_year == expected_year else \"\u2717\"\n                print(f\"Year {two_digit_year:02d}: {actual_year} vs {expected_year} {status}\")\n                \n            except Exception as e:\n                print(f\"Year {two_digit_year:02d}: Error - {e}\")\n\nif __name__ == '__main__':\n    success = test_current_vs_expected()\n    test_edge_cases()\n    \n    if not success:\n        print(\"\\n\u274c Implementation needs to be fixed to be RFC 7231 compliant\")\n        sys.exit(1)\n    else:\n        print(\"\\n\u2705 Implementation is RFC 7231 compliant\")\n        sys.exit(0)", "impl_source": "oh_aci", "diff": "--- /workspace/django__django__3.1/test_year_issue.py\n+++ /workspace/django__django__3.1/test_year_issue.py\n@@ -15,3 +15,19 @@\n-def test_current_behavior():\n-    \"\"\"Test the current behavior of two-digit year parsing.\"\"\"\n-    print(\"=== Current Behavior Test ===\")\n+def calculate_rfc_compliant_year(two_digit_year):\n+    \"\"\"Calculate RFC 7231 compliant year from two-digit year.\"\"\"\n+    current_year = datetime.datetime.now().year\n+    current_century = current_year // 100 * 100\n+    candidate_year = current_century + two_digit_year\n+\n+    # RFC 7231: interpret as most recent year in past if >50 years in future\n+    if candidate_year - current_year > 50:\n+        candidate_year -= 100\n+\n+    return candidate_year\n+\n+def test_current_vs_expected():\n+    \"\"\"Test current behavior vs expected RFC 7231 compliant behavior.\"\"\"\n+    print(\"=== Current vs Expected Behavior Test ===\")\n+\n+    current_year = datetime.datetime.now().year\n+    print(f\"Current year: {current_year}\")\n+    print()\n@@ -21,6 +37,8 @@\n-        ('Sunday, 06-Nov-69 08:49:37 GMT', '69'),  # Should be 2069\n-        ('Sunday, 06-Nov-70 08:49:37 GMT', '70'),  # Should be 1970\n-        ('Sunday, 06-Nov-99 08:49:37 GMT', '99'),  # Should be 1999\n-        ('Sunday, 06-Nov-00 08:49:37 GMT', '00'),  # Should be 2000\n-        ('Sunday, 06-Nov-50 08:49:37 GMT', '50'),  # Should be 2050\n-        ('Sunday, 06-Nov-25 08:49:37 GMT', '25'),  # Should be 2025\n+        ('Sunday, 06-Nov-69 08:49:37 GMT', 69),\n+        ('Sunday, 06-Nov-70 08:49:37 GMT', 70),\n+        ('Sunday, 06-Nov-99 08:49:37 GMT', 99),\n+        ('Sunday, 06-Nov-00 08:49:37 GMT', 0),\n+        ('Sunday, 06-Nov-50 08:49:37 GMT', 50),\n+        ('Sunday, 06-Nov-25 08:49:37 GMT', 25),\n+        ('Sunday, 06-Nov-80 08:49:37 GMT', 80),\n+        ('Sunday, 06-Nov-85 08:49:37 GMT', 85),\n@@ -29 +47,3 @@\n-    for date_str, year_str in test_cases:\n+    issues_found = []\n+\n+    for date_str, two_digit_year in test_cases:\n@@ -33 +53,9 @@\n-            print(f\"Input: {year_str} -> Parsed as: {dt.year}\")\n+            actual_year = dt.year\n+            expected_year = calculate_rfc_compliant_year(two_digit_year)\n+\n+            status = \"\u2713\" if actual_year == expected_year else \"\u2717\"\n+            print(f\"Input: {two_digit_year:02d} -> Current: {actual_year} | Expected: {expected_year} {status}\")\n+\n+            if actual_year != expected_year:\n+                issues_found.append((two_digit_year, actual_year, expected_year))\n+\n@@ -35 +63,11 @@\n-            print(f\"Input: {year_str} -> Error: {e}\")\n+            print(f\"Input: {two_digit_year:02d} -> Error: {e}\")\n+\n+    print()\n+    if issues_found:\n+        print(\"Issues found:\")\n+        for two_digit, actual, expected in issues_found:\n+            print(f\"  Year {two_digit:02d}: got {actual}, expected {expected}\")\n+    else:\n+        print(\"No issues found - implementation is RFC 7231 compliant!\")\n+\n+    return len(issues_found) == 0\n@@ -37,3 +75,3 @@\n-def test_rfc_compliant_behavior():\n-    \"\"\"Test what RFC 7231 compliant behavior should be.\"\"\"\n-    print(\"\\n=== RFC 7231 Compliant Behavior (Expected) ===\")\n+def test_edge_cases():\n+    \"\"\"Test edge cases around the 50-year boundary.\"\"\"\n+    print(\"\\n=== Edge Case Test ===\")\n@@ -42,2 +80 @@\n-    current_century = current_year // 100 * 100\n-    current_two_digit = current_year % 100\n+    print(f\"Current year: {current_year}\")\n@@ -45,2 +82,3 @@\n-    print(f\"Current year: {current_year}\")\n-    print(f\"Current two-digit year: {current_two_digit}\")\n+    # Test years around the 50-year boundary\n+    boundary_year = (current_year + 50) % 100\n+    print(f\"50-year boundary two-digit year: {boundary_year:02d}\")\n@@ -48,2 +86 @@\n-    # Test cases with two-digit years\n-    test_cases = ['69', '70', '99', '00', '50', '25']\n+    test_years = [boundary_year - 2, boundary_year - 1, boundary_year, boundary_year + 1, boundary_year + 2]\n@@ -51,9 +88,14 @@\n-    for year_str in test_cases:\n-        year_int = int(year_str)\n-\n-        # RFC 7231 logic: interpret as most recent year in past if >50 years in future\n-        candidate_year = current_century + year_int\n-        if candidate_year - current_year > 50:\n-            candidate_year -= 100\n-\n-        print(f\"Input: {year_str} -> Should be: {candidate_year}\")\n+    for two_digit_year in test_years:\n+        if 0 <= two_digit_year <= 99:\n+            date_str = f'Sunday, 06-Nov-{two_digit_year:02d} 08:49:37 GMT'\n+            try:\n+                timestamp = parse_http_date(date_str)\n+                dt = datetime.datetime.utcfromtimestamp(timestamp)\n+                actual_year = dt.year\n+                expected_year = calculate_rfc_compliant_year(two_digit_year)\n+\n+                status = \"\u2713\" if actual_year == expected_year else \"\u2717\"\n+                print(f\"Year {two_digit_year:02d}: {actual_year} vs {expected_year} {status}\")\n+\n+            except Exception as e:\n+                print(f\"Year {two_digit_year:02d}: Error - {e}\")\n@@ -62,2 +104,9 @@\n-    test_current_behavior()\n-    test_rfc_compliant_behavior()\n+    success = test_current_vs_expected()\n+    test_edge_cases()\n+\n+    if not success:\n+        print(\"\\n\u274c Implementation needs to be fixed to be RFC 7231 compliant\")\n+        sys.exit(1)\n+    else:\n+        print(\"\\n\u2705 Implementation is RFC 7231 compliant\")\n+        sys.exit(0)", "_diff_cache": null}}