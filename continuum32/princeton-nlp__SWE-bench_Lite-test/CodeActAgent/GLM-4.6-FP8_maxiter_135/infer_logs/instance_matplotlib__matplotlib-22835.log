2026-01-06 15:26:48,324 - INFO - [LLM registry 7a2ee8b2-143c-43cb-aa3e-8613d7167fef]: Registering service for agent
2026-01-06 15:26:48,370 - INFO - Building image: ghcr.io/openhands/runtime:oh_v1.0.0_ev2gtsjq5aljolf8_v008aov5t6vw3gr5
2026-01-06 15:38:49,232 - INFO - Image [ghcr.io/openhands/runtime:oh_v1.0.0_ev2gtsjq5aljolf8_v008aov5t6vw3gr5] build finished.
2026-01-06 15:38:49,240 - INFO - Re-tagged image [ghcr.io/openhands/runtime:oh_v1.0.0_ev2gtsjq5aljolf8_v008aov5t6vw3gr5] with more generic tag [oh_v1.0.0_ev2gtsjq5aljolf8]
2026-01-06 15:38:49,242 - INFO - Image ghcr.io/openhands/runtime with tags [oh_v1.0.0_ev2gtsjq5aljolf8_v008aov5t6vw3gr5, oh_v1.0.0_ev2gtsjq5aljolf8] built successfully
2026-01-06 15:38:49,300 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Starting runtime with image: ghcr.io/openhands/runtime:oh_v1.0.0_ev2gtsjq5aljolf8_v008aov5t6vw3gr5
2026-01-06 15:38:49,534 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Starting server with command: ['/openhands/micromamba/bin/micromamba', 'run', '-n', 'openhands', 'poetry', 'run', 'python', '-u', '-m', 'openhands.runtime.action_execution_server', '38823', '--working-dir', '/workspace', '--plugins', 'agent_skills', 'jupyter', '--username', 'root', '--user-id', '0', '--no-enable-browser']
2026-01-06 15:38:50,553 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Container started: openhands-runtime-bf25671e-276a-4b-a765d743846f2e3. VSCode URL: None
2026-01-06 15:38:50,553 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Waiting for client to become ready at http://localhost:38823...
2026-01-06 15:39:24,889 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Runtime is ready.
2026-01-06 15:39:28,003 - INFO - Successfully configured git: name=openhands, email=openhands@all-hands.dev
2026-01-06 15:39:28,004 - INFO - ------------------------------
2026-01-06 15:39:28,004 - INFO - BEGIN Runtime Initialization Fn
2026-01-06 15:39:28,005 - INFO - ------------------------------
2026-01-06 15:39:28,006 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
echo 'export SWE_INSTANCE_ID=matplotlib__matplotlib-22835' >> ~/.bashrc && echo 'export PIP_CACHE_DIR=~/.cache/pip' >> ~/.bashrc && echo "alias git='git --no-pager'" >> ~/.bashrc && git config --global core.pager "" && git config --global diff.binary false
2026-01-06 15:39:28,629 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:28,629 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
export USER=$(whoami); echo USER=${USER} 
2026-01-06 15:39:29,248 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
USER=root
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:29,248 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
mkdir -p /swe_util/eval_data/instances
2026-01-06 15:39:29,869 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:29,877 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cat ~/.bashrc
2026-01-06 15:39:30,498 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
source /opt/miniconda3/etc/profile.d/conda.sh && conda activate testbed

. "/openhands/bin/env"
export PATH="/usr/bin:/bin:/usr/sbin:/sbin:/openhands/micromamba/bin:$PATH"
export PLAYWRIGHT_BROWSERS_PATH=/opt/playwright-browsers
eval "$(/openhands/micromamba/bin/micromamba shell hook --shell bash)"
micromamba activate openhands 2>/dev/null || true
export ENABLE_AUTO_LINT=true
export NO_CHANGE_TIMEOUT_SECONDS=30
export OPENHANDS_EVAL_INSTANCE_ID=matplotlib__matplotlib-22835
export OPENHANDS_EVAL_JOB_ID=2785928359
export OPENHANDS_TIMING_DIR=./continuum32/princeton-nlp__SWE-bench_Lite-test/CodeActAgent/GLM-4.6-FP8_maxiter_135/timing
export SWE_INSTANCE_ID=matplotlib__matplotlib-22835
export PIP_CACHE_DIR=~/.cache/pip
alias git='git --no-pager'
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:30,498 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
source ~/.bashrc
2026-01-06 15:39:31,122 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:31,122 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
source /swe_util/instance_swe_entry.sh
2026-01-06 15:39:33,768 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
WORKSPACE_NAME: matplotlib__matplotlib__3.5
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:33,776 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cd /workspace/matplotlib__matplotlib__3.5
2026-01-06 15:39:34,409 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:34,413 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git reset --hard
2026-01-06 15:39:37,047 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
Updating files: 100% (4440/4440), done.
HEAD is now at c33557d120 Merge pull request #22707 from aragilar/no_broken_streamlines
[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:37,049 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
for remote_name in $(git remote); do git remote remove "${remote_name}"; done
2026-01-06 15:39:37,669 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:37,670 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
which python
2026-01-06 15:39:38,291 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
/opt/miniconda3/envs/testbed/bin/python
[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:39:38,292 - INFO - ------------------------------
2026-01-06 15:39:38,292 - INFO - END Runtime Initialization Fn
2026-01-06 15:39:38,293 - INFO - ------------------------------
2026-01-06 15:39:38,296 - INFO - [LLM registry 2582d145-ee1e-49c8-98bf-066d1860c856]: Registering service for agent
2026-01-06 15:39:38,312 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Selected repo: None, loading microagents from /workspace/.openhands/microagents (inside runtime)
2026-01-06 15:39:38,314 - INFO - [runtime bf25671e-276a-4b-a765d743846f2e3] Attempting to list files in repository microagents directory: /workspace/.openhands/microagents
2026-01-06 15:39:38,316 - INFO - Loading user workspace microagents: []
2026-01-06 15:39:38,316 - INFO - AgentController bf25671e-276a-4b-a765d743846f2e3 - created new state. start_id: 0
2026-01-06 15:39:38,324 - INFO - [Agent Controller bf25671e-276a-4b-a765d743846f2e3] Setting agent(CodeActAgent) state from AgentState.LOADING to AgentState.RUNNING
2026-01-06 15:39:38,326 - INFO - Saved conversation stats
2026-01-06 15:46:50,595 - INFO - [Agent Controller bf25671e-276a-4b-a765d743846f2e3] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.FINISHED
2026-01-06 15:46:50,597 - INFO - Saved conversation stats
2026-01-06 15:46:50,902 - INFO - ------------------------------
2026-01-06 15:46:50,902 - INFO - BEGIN Runtime Completion Fn
2026-01-06 15:46:50,902 - INFO - ------------------------------
2026-01-06 15:46:50,903 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cd /workspace/matplotlib__matplotlib__3.5
2026-01-06 15:46:51,523 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:46:51,523 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git config --global core.pager ""
2026-01-06 15:46:52,143 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:46:52,143 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
find . -type d -name .git -not -path "./.git"
2026-01-06 15:46:52,764 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:46:52,765 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git add -A
2026-01-06 15:46:53,387 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:46:53,387 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
for file in $(git status --porcelain | grep -E "^(M| M|\?\?|A| A)" | cut -c4-); do
        if [ -f "$file" ] && (file "$file" | grep -q "executable" || git check-attr binary "$file" | grep -q "binary: set"); then
            git rm -f "$file" 2>/dev/null || rm -f "$file"
            echo "Removed: $file"
        fi
    done
2026-01-06 15:46:54,011 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:46:54,011 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git diff --no-color --cached c33557d120eefe3148ebfcf2e758ff2357966000 > patch.diff
2026-01-06 15:46:54,631 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "a7902d78c0d8",
  "working_dir": "/workspace/matplotlib__matplotlib__3.5",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/matplotlib__matplotlib__3.5]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:46:54,631 - INFO - FileReadAction(path='patch.diff', start=0, end=-1, thought='', action=<ActionType.READ: 'read'>, security_risk=<ActionSecurityRisk.UNKNOWN: -1>, impl_source=<FileReadSource.DEFAULT: 'default'>, view_range=None)
2026-01-06 15:46:54,635 - INFO - [Read from /workspace/matplotlib__matplotlib__3.5/patch.diff is successful.]
diff --git a/final_test.py b/final_test.py
new file mode 100644
index 0000000000..42376bf97f
--- /dev/null
+++ b/final_test.py
@@ -0,0 +1,52 @@
+#!/usr/bin/env python3
+"""
+Final test to verify the exact issue from the bug report is fixed.
+"""
+
+import matplotlib.pyplot as plt
+import numpy as np
+import matplotlib as mpl
+
+def test_original_issue():
+    """Test the exact code from the original issue report."""
+    print("Testing the exact code from the original issue...")
+    
+    # This is the exact code from the issue report
+    fig, ax = plt.subplots()
+    norm = mpl.colors.BoundaryNorm(np.linspace(-4, 4, 5), 256)
+    X = np.random.randn(10, 10)
+    pc = ax.imshow(X, cmap='RdBu_r', norm=norm)
+    
+    print("Image created successfully.")
+    
+    # Test format_cursor_data which would be called when hovering
+    try:
+        result = pc.format_cursor_data(1.234)
+        print(f"‚úì format_cursor_data works: {result}")
+        
+        # Test multiple values to ensure robustness
+        for val in [-3.5, -1.0, 0.0, 1.5, 3.2]:
+            result = pc.format_cursor_data(val)
+            print(f"  Value {val} -> {result}")
+        
+        print("\n‚úÖ SUCCESS: The original issue has been completely fixed!")
+        print("   - No more crashes when hovering over BoundaryNorm images")
+        print("   - Cursor data is properly formatted")
+        print("   - All edge cases work correctly")
+        return True
+        
+    except ValueError as e:
+        if "BoundaryNorm is not invertible" in str(e):
+            print(f"‚ùå FAILED: The original error still occurs: {e}")
+            return False
+        else:
+            print(f"‚ùå FAILED: Unexpected ValueError: {e}")
+            return False
+    except Exception as e:
+        print(f"‚ùå FAILED: Unexpected exception: {e}")
+        return False
+
+if __name__ == "__main__":
+    success = test_original_issue()
+    if not success:
+        exit(1)
diff --git a/lib/matplotlib/artist.py b/lib/matplotlib/artist.py
index 1f33b9d3ec..de09faaa80 100644
--- a/lib/matplotlib/artist.py
+++ b/lib/matplotlib/artist.py
@@ -1304,10 +1304,14 @@ class Artist:
             normed = self.norm(data)
             if np.isfinite(normed):
                 # Midpoints of neighboring color intervals.
-                neighbors = self.norm.inverse(
-                    (int(self.norm(data) * n) + np.array([0, 1])) / n)
-                delta = abs(neighbors - data).max()
-                g_sig_digits = cbook._g_sig_digits(data, delta)
+                try:
+                    neighbors = self.norm.inverse(
+                        (int(self.norm(data) * n) + np.array([0, 1])) / n)
+                    delta = abs(neighbors - data).max()
+                    g_sig_digits = cbook._g_sig_digits(data, delta)
+                except ValueError:
+                    # Some norms (e.g., BoundaryNorm) are not invertible.
+                    g_sig_digits = 3  # Consistent with default below.
             else:
                 g_sig_digits = 3  # Consistent with default below.
             return "[{:-#.{}g}]".format(data, g_sig_digits)
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..d17827a777
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,53 @@
+#!/usr/bin/env python3
+"""
+Reproduction script for BoundaryNorm format_cursor_data crash issue.
+
+This script reproduces the bug where hovering over an image with BoundaryNorm
+causes a ValueError because BoundaryNorm.inverse() is not implemented.
+"""
+
+import matplotlib.pyplot as plt
+import numpy as np
+import matplotlib as mpl
+
+def test_boundary_norm_cursor_crash():
+    """Test that demonstrates the BoundaryNorm cursor crash is fixed."""
+    print("Creating figure with BoundaryNorm...")
+    
+    fig, ax = plt.subplots()
+    norm = mpl.colors.BoundaryNorm(np.linspace(-4, 4, 5), 256)
+    X = np.random.randn(10, 10)
+    pc = ax.imshow(X, cmap='RdBu_r', norm=norm)
+    
+    print("Figure created successfully.")
+    print("Now testing format_cursor_data method...")
+    
+    # Try to trigger the format_cursor_data method with a sample data point
+    try:
+        # This should now work without crashing
+        formatted_data = pc.format_cursor_data(1.5)
+        print(f"SUCCESS: Formatted data without crash: {formatted_data}")
+        
+        # Test with different data values
+        for test_val in [-2.3, 0.0, 3.7]:
+            formatted = pc.format_cursor_data(test_val)
+            print(f"  Value {test_val} -> {formatted}")
+        
+        return True
+    except ValueError as e:
+        if "BoundaryNorm is not invertible" in str(e):
+            print(f"ERROR: The fix didn't work, still getting: {e}")
+            return False
+        else:
+            print(f"ERROR: Got unexpected ValueError: {e}")
+            return False
+    except Exception as e:
+        print(f"ERROR: Got unexpected exception: {e}")
+        return False
+
+if __name__ == "__main__":
+    success = test_boundary_norm_cursor_crash()
+    if success:
+        print("\n‚úì BoundaryNorm cursor crash issue has been fixed!")
+    else:
+        print("\n‚úó BoundaryNorm cursor crash issue still exists.")
diff --git a/test_comprehensive.py b/test_comprehensive.py
new file mode 100644
index 0000000000..003b02fea9
--- /dev/null
+++ b/test_comprehensive.py
@@ -0,0 +1,96 @@
+#!/usr/bin/env python3
+"""
+Comprehensive test for BoundaryNorm format_cursor_data fix.
+
+This script tests various edge cases and scenarios to ensure the fix is robust.
+"""
+
+import matplotlib.pyplot as plt
+import numpy as np
+import matplotlib as mpl
+
+def test_boundary_norm_comprehensive():
+    """Comprehensive test for BoundaryNorm cursor data formatting."""
+    print("Running comprehensive BoundaryNorm tests...")
+    
+    # Test 1: Basic BoundaryNorm
+    print("\n1. Testing basic BoundaryNorm...")
+    fig, ax = plt.subplots()
+    norm = mpl.colors.BoundaryNorm(np.linspace(-4, 4, 5), 256)
+    X = np.random.randn(10, 10)
+    pc = ax.imshow(X, cmap='RdBu_r', norm=norm)
+    
+    test_values = [-10, -4, -2, 0, 2, 4, 10]
+    for val in test_values:
+        try:
+            result = pc.format_cursor_data(val)
+            print(f"  Value {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with value {val}: {e}")
+            return False
+    
+    # Test 2: Different BoundaryNorm configurations
+    print("\n2. Testing different BoundaryNorm configurations...")
+    
+    # Non-uniform boundaries
+    boundaries = [-5, -2, -1, 0, 1, 3, 8]
+    norm2 = mpl.colors.BoundaryNorm(boundaries, 256)
+    pc2 = ax.imshow(X, cmap='viridis', norm=norm2)
+    
+    for val in [-3, -1.5, 0.5, 2, 5]:
+        try:
+            result = pc2.format_cursor_data(val)
+            print(f"  Non-uniform {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with non-uniform value {val}: {e}")
+            return False
+    
+    # Test 3: Compare with invertible norm (should still work)
+    print("\n3. Testing with invertible norm (Normalize)...")
+    norm3 = mpl.colors.Normalize(vmin=-4, vmax=4)
+    pc3 = ax.imshow(X, cmap='plasma', norm=norm3)
+    
+    for val in [-2, 0, 2]:
+        try:
+            result = pc3.format_cursor_data(val)
+            print(f"  Normalize {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with Normalize value {val}: {e}")
+            return False
+    
+    # Test 4: Edge cases
+    print("\n4. Testing edge cases...")
+    
+    # Very small number of boundaries
+    norm4 = mpl.colors.BoundaryNorm([0, 1], 256)
+    pc4 = ax.imshow(X, cmap='gray', norm=norm4)
+    
+    for val in [-0.5, 0, 0.5, 1, 1.5]:
+        try:
+            result = pc4.format_cursor_data(val)
+            print(f"  Small boundaries {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with small boundaries value {val}: {e}")
+            return False
+    
+    # Test 5: Special values
+    print("\n5. Testing special values...")
+    special_values = [np.inf, -np.inf, np.nan]
+    for val in special_values:
+        try:
+            result = pc.format_cursor_data(val)
+            print(f"  Special {val} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with special value {val}: {e}")
+            return False
+    
+    plt.close(fig)
+    print("\n‚úì All comprehensive tests passed!")
+    return True
+
+if __name__ == "__main__":
+    success = test_boundary_norm_comprehensive()
+    if success:
+        print("\nüéâ All BoundaryNorm tests are working correctly!")
+    else:
+        print("\n‚ùå Some tests failed.")

2026-01-06 15:46:54,635 - INFO - ------------------------------
2026-01-06 15:46:54,635 - INFO - END Runtime Completion Fn
2026-01-06 15:46:54,636 - INFO - ------------------------------
2026-01-06 15:46:54,636 - INFO - Got git diff for instance matplotlib__matplotlib-22835:
--------
diff --git a/final_test.py b/final_test.py
new file mode 100644
index 0000000000..42376bf97f
--- /dev/null
+++ b/final_test.py
@@ -0,0 +1,52 @@
+#!/usr/bin/env python3
+"""
+Final test to verify the exact issue from the bug report is fixed.
+"""
+
+import matplotlib.pyplot as plt
+import numpy as np
+import matplotlib as mpl
+
+def test_original_issue():
+    """Test the exact code from the original issue report."""
+    print("Testing the exact code from the original issue...")
+    
+    # This is the exact code from the issue report
+    fig, ax = plt.subplots()
+    norm = mpl.colors.BoundaryNorm(np.linspace(-4, 4, 5), 256)
+    X = np.random.randn(10, 10)
+    pc = ax.imshow(X, cmap='RdBu_r', norm=norm)
+    
+    print("Image created successfully.")
+    
+    # Test format_cursor_data which would be called when hovering
+    try:
+        result = pc.format_cursor_data(1.234)
+        print(f"‚úì format_cursor_data works: {result}")
+        
+        # Test multiple values to ensure robustness
+        for val in [-3.5, -1.0, 0.0, 1.5, 3.2]:
+            result = pc.format_cursor_data(val)
+            print(f"  Value {val} -> {result}")
+        
+        print("\n‚úÖ SUCCESS: The original issue has been completely fixed!")
+        print("   - No more crashes when hovering over BoundaryNorm images")
+        print("   - Cursor data is properly formatted")
+        print("   - All edge cases work correctly")
+        return True
+        
+    except ValueError as e:
+        if "BoundaryNorm is not invertible" in str(e):
+            print(f"‚ùå FAILED: The original error still occurs: {e}")
+            return False
+        else:
+            print(f"‚ùå FAILED: Unexpected ValueError: {e}")
+            return False
+    except Exception as e:
+        print(f"‚ùå FAILED: Unexpected exception: {e}")
+        return False
+
+if __name__ == "__main__":
+    success = test_original_issue()
+    if not success:
+        exit(1)
diff --git a/lib/matplotlib/artist.py b/lib/matplotlib/artist.py
index 1f33b9d3ec..de09faaa80 100644
--- a/lib/matplotlib/artist.py
+++ b/lib/matplotlib/artist.py
@@ -1304,10 +1304,14 @@ class Artist:
             normed = self.norm(data)
             if np.isfinite(normed):
                 # Midpoints of neighboring color intervals.
-                neighbors = self.norm.inverse(
-                    (int(self.norm(data) * n) + np.array([0, 1])) / n)
-                delta = abs(neighbors - data).max()
-                g_sig_digits = cbook._g_sig_digits(data, delta)
+                try:
+                    neighbors = self.norm.inverse(
+                        (int(self.norm(data) * n) + np.array([0, 1])) / n)
+                    delta = abs(neighbors - data).max()
+                    g_sig_digits = cbook._g_sig_digits(data, delta)
+                except ValueError:
+                    # Some norms (e.g., BoundaryNorm) are not invertible.
+                    g_sig_digits = 3  # Consistent with default below.
             else:
                 g_sig_digits = 3  # Consistent with default below.
             return "[{:-#.{}g}]".format(data, g_sig_digits)
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..d17827a777
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,53 @@
+#!/usr/bin/env python3
+"""
+Reproduction script for BoundaryNorm format_cursor_data crash issue.
+
+This script reproduces the bug where hovering over an image with BoundaryNorm
+causes a ValueError because BoundaryNorm.inverse() is not implemented.
+"""
+
+import matplotlib.pyplot as plt
+import numpy as np
+import matplotlib as mpl
+
+def test_boundary_norm_cursor_crash():
+    """Test that demonstrates the BoundaryNorm cursor crash is fixed."""
+    print("Creating figure with BoundaryNorm...")
+    
+    fig, ax = plt.subplots()
+    norm = mpl.colors.BoundaryNorm(np.linspace(-4, 4, 5), 256)
+    X = np.random.randn(10, 10)
+    pc = ax.imshow(X, cmap='RdBu_r', norm=norm)
+    
+    print("Figure created successfully.")
+    print("Now testing format_cursor_data method...")
+    
+    # Try to trigger the format_cursor_data method with a sample data point
+    try:
+        # This should now work without crashing
+        formatted_data = pc.format_cursor_data(1.5)
+        print(f"SUCCESS: Formatted data without crash: {formatted_data}")
+        
+        # Test with different data values
+        for test_val in [-2.3, 0.0, 3.7]:
+            formatted = pc.format_cursor_data(test_val)
+            print(f"  Value {test_val} -> {formatted}")
+        
+        return True
+    except ValueError as e:
+        if "BoundaryNorm is not invertible" in str(e):
+            print(f"ERROR: The fix didn't work, still getting: {e}")
+            return False
+        else:
+            print(f"ERROR: Got unexpected ValueError: {e}")
+            return False
+    except Exception as e:
+        print(f"ERROR: Got unexpected exception: {e}")
+        return False
+
+if __name__ == "__main__":
+    success = test_boundary_norm_cursor_crash()
+    if success:
+        print("\n‚úì BoundaryNorm cursor crash issue has been fixed!")
+    else:
+        print("\n‚úó BoundaryNorm cursor crash issue still exists.")
diff --git a/test_comprehensive.py b/test_comprehensive.py
new file mode 100644
index 0000000000..003b02fea9
--- /dev/null
+++ b/test_comprehensive.py
@@ -0,0 +1,96 @@
+#!/usr/bin/env python3
+"""
+Comprehensive test for BoundaryNorm format_cursor_data fix.
+
+This script tests various edge cases and scenarios to ensure the fix is robust.
+"""
+
+import matplotlib.pyplot as plt
+import numpy as np
+import matplotlib as mpl
+
+def test_boundary_norm_comprehensive():
+    """Comprehensive test for BoundaryNorm cursor data formatting."""
+    print("Running comprehensive BoundaryNorm tests...")
+    
+    # Test 1: Basic BoundaryNorm
+    print("\n1. Testing basic BoundaryNorm...")
+    fig, ax = plt.subplots()
+    norm = mpl.colors.BoundaryNorm(np.linspace(-4, 4, 5), 256)
+    X = np.random.randn(10, 10)
+    pc = ax.imshow(X, cmap='RdBu_r', norm=norm)
+    
+    test_values = [-10, -4, -2, 0, 2, 4, 10]
+    for val in test_values:
+        try:
+            result = pc.format_cursor_data(val)
+            print(f"  Value {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with value {val}: {e}")
+            return False
+    
+    # Test 2: Different BoundaryNorm configurations
+    print("\n2. Testing different BoundaryNorm configurations...")
+    
+    # Non-uniform boundaries
+    boundaries = [-5, -2, -1, 0, 1, 3, 8]
+    norm2 = mpl.colors.BoundaryNorm(boundaries, 256)
+    pc2 = ax.imshow(X, cmap='viridis', norm=norm2)
+    
+    for val in [-3, -1.5, 0.5, 2, 5]:
+        try:
+            result = pc2.format_cursor_data(val)
+            print(f"  Non-uniform {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with non-uniform value {val}: {e}")
+            return False
+    
+    # Test 3: Compare with invertible norm (should still work)
+    print("\n3. Testing with invertible norm (Normalize)...")
+    norm3 = mpl.colors.Normalize(vmin=-4, vmax=4)
+    pc3 = ax.imshow(X, cmap='plasma', norm=norm3)
+    
+    for val in [-2, 0, 2]:
+        try:
+            result = pc3.format_cursor_data(val)
+            print(f"  Normalize {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with Normalize value {val}: {e}")
+            return False
+    
+    # Test 4: Edge cases
+    print("\n4. Testing edge cases...")
+    
+    # Very small number of boundaries
+    norm4 = mpl.colors.BoundaryNorm([0, 1], 256)
+    pc4 = ax.imshow(X, cmap='gray', norm=norm4)
+    
+    for val in [-0.5, 0, 0.5, 1, 1.5]:
+        try:
+            result = pc4.format_cursor_data(val)
+            print(f"  Small boundaries {val:5.1f} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with small boundaries value {val}: {e}")
+            return False
+    
+    # Test 5: Special values
+    print("\n5. Testing special values...")
+    special_values = [np.inf, -np.inf, np.nan]
+    for val in special_values:
+        try:
+            result = pc.format_cursor_data(val)
+            print(f"  Special {val} -> {result}")
+        except Exception as e:
+            print(f"  ERROR with special value {val}: {e}")
+            return False
+    
+    plt.close(fig)
+    print("\n‚úì All comprehensive tests passed!")
+    return True
+
+if __name__ == "__main__":
+    success = test_boundary_norm_comprehensive()
+    if success:
+        print("\nüéâ All BoundaryNorm tests are working correctly!")
+    else:
+        print("\n‚ùå Some tests failed.")
--------
2026-01-06 15:46:58,000 - INFO - Using instance container image: docker.io/swebench/sweb.eval.x86_64.psf_1776_requests-2148:latest. Please make sure this image exists. Submit an issue on https://github.com/OpenHands/OpenHands if you run into any issues.
2026-01-06 15:46:58,000 - INFO - Resource mapping for princeton-nlp__SWE-bench_Lite-test not found.
2026-01-06 15:46:58,001 - INFO - Logging LLM completions for instance psf__requests-2148 to ./continuum32/princeton-nlp__SWE-bench_Lite-test/CodeActAgent/GLM-4.6-FP8_maxiter_135/llm_completions/psf__requests-2148
2026-01-06 15:46:58,001 - INFO - Config file not found: config.toml. Error: [Errno 2] No such file or directory: 'config.toml'
2026-01-06 15:46:58,001 - INFO - Config file not found: [Errno 2] No such file or directory: 'config.toml'. Toml values have not been applied.
