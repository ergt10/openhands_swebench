2026-01-06 14:16:48,318 - INFO - [LLM registry 8a597ca9-1bed-4631-9f13-1b70e439bfcc]: Registering service for agent
2026-01-06 14:16:48,406 - INFO - Building image: ghcr.io/openhands/runtime:oh_v1.0.0_uy9ldccp3gynyqqj_v008aov5t6vw3gr5
2026-01-06 14:31:41,333 - INFO - Image [ghcr.io/openhands/runtime:oh_v1.0.0_uy9ldccp3gynyqqj_v008aov5t6vw3gr5] build finished.
2026-01-06 14:31:41,363 - INFO - Re-tagged image [ghcr.io/openhands/runtime:oh_v1.0.0_uy9ldccp3gynyqqj_v008aov5t6vw3gr5] with more generic tag [oh_v1.0.0_uy9ldccp3gynyqqj]
2026-01-06 14:31:41,368 - INFO - Image ghcr.io/openhands/runtime with tags [oh_v1.0.0_uy9ldccp3gynyqqj_v008aov5t6vw3gr5, oh_v1.0.0_uy9ldccp3gynyqqj] built successfully
2026-01-06 14:31:41,733 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Starting runtime with image: ghcr.io/openhands/runtime:oh_v1.0.0_uy9ldccp3gynyqqj_v008aov5t6vw3gr5
2026-01-06 14:31:41,767 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Starting server with command: ['/openhands/micromamba/bin/micromamba', 'run', '-n', 'openhands', 'poetry', 'run', 'python', '-u', '-m', 'openhands.runtime.action_execution_server', '38023', '--working-dir', '/workspace', '--plugins', 'agent_skills', 'jupyter', '--username', 'root', '--user-id', '0', '--no-enable-browser']
2026-01-06 14:31:42,634 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Container started: openhands-runtime-a6dae39a-6544-45-e020999c52a0916. VSCode URL: None
2026-01-06 14:31:42,634 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Waiting for client to become ready at http://localhost:38023...
2026-01-06 14:32:17,078 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Runtime is ready.
2026-01-06 14:32:20,213 - INFO - Successfully configured git: name=openhands, email=openhands@all-hands.dev
2026-01-06 14:32:20,214 - INFO - ------------------------------
2026-01-06 14:32:20,214 - INFO - BEGIN Runtime Initialization Fn
2026-01-06 14:32:20,214 - INFO - ------------------------------
2026-01-06 14:32:20,215 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
echo 'export SWE_INSTANCE_ID=django__django-11019' >> ~/.bashrc && echo 'export PIP_CACHE_DIR=~/.cache/pip' >> ~/.bashrc && echo "alias git='git --no-pager'" >> ~/.bashrc && git config --global core.pager "" && git config --global diff.binary false
2026-01-06 14:32:20,840 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:20,841 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
export USER=$(whoami); echo USER=${USER} 
2026-01-06 14:32:21,527 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
USER=root
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:21,528 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
mkdir -p /swe_util/eval_data/instances
2026-01-06 14:32:22,196 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:22,206 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cat ~/.bashrc
2026-01-06 14:32:22,830 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
source /opt/miniconda3/etc/profile.d/conda.sh && conda activate testbed

. "/openhands/bin/env"
export PATH="/usr/bin:/bin:/usr/sbin:/sbin:/openhands/micromamba/bin:$PATH"
export PLAYWRIGHT_BROWSERS_PATH=/opt/playwright-browsers
eval "$(/openhands/micromamba/bin/micromamba shell hook --shell bash)"
micromamba activate openhands 2>/dev/null || true
export ENABLE_AUTO_LINT=true
export NO_CHANGE_TIMEOUT_SECONDS=30
export OPENHANDS_EVAL_INSTANCE_ID=django__django-11019
export OPENHANDS_EVAL_JOB_ID=2302342438
export OPENHANDS_TIMING_DIR=./continuum32/princeton-nlp__SWE-bench_Lite-test/CodeActAgent/GLM-4.6-FP8_maxiter_135/timing
export SWE_INSTANCE_ID=django__django-11019
export PIP_CACHE_DIR=~/.cache/pip
alias git='git --no-pager'
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:22,830 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
source ~/.bashrc
2026-01-06 14:32:23,454 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:23,454 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
source /swe_util/instance_swe_entry.sh
2026-01-06 14:32:37,158 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
WORKSPACE_NAME: django__django__3.0
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:37,158 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cd /workspace/django__django__3.0
2026-01-06 14:32:37,781 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:37,781 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git reset --hard
2026-01-06 14:32:38,910 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
HEAD is now at 93e892bb64 Refs #29523 -- Updated admin's collapse.min.js.
[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:38,911 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
for remote_name in $(git remote); do git remote remove "${remote_name}"; done
2026-01-06 14:32:39,546 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:39,546 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
which python
2026-01-06 14:32:40,168 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
/opt/miniconda3/envs/testbed/bin/python
[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:32:40,168 - INFO - ------------------------------
2026-01-06 14:32:40,169 - INFO - END Runtime Initialization Fn
2026-01-06 14:32:40,170 - INFO - ------------------------------
2026-01-06 14:32:40,172 - INFO - [LLM registry 8bfa537e-0bd3-4dc1-ac91-73dca4017ed2]: Registering service for agent
2026-01-06 14:32:40,186 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Selected repo: None, loading microagents from /workspace/.openhands/microagents (inside runtime)
2026-01-06 14:32:40,189 - INFO - [runtime a6dae39a-6544-45-e020999c52a0916] Attempting to list files in repository microagents directory: /workspace/.openhands/microagents
2026-01-06 14:32:40,191 - INFO - Loading user workspace microagents: []
2026-01-06 14:32:40,191 - INFO - AgentController a6dae39a-6544-45-e020999c52a0916 - created new state. start_id: 0
2026-01-06 14:32:40,199 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.LOADING to AgentState.RUNNING
2026-01-06 14:32:40,202 - INFO - Saved conversation stats
2026-01-06 14:42:54,123 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.AWAITING_USER_INPUT
2026-01-06 14:42:54,126 - INFO - Saved conversation stats
2026-01-06 14:42:54,127 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.AWAITING_USER_INPUT to AgentState.RUNNING
2026-01-06 14:42:54,129 - INFO - Saved conversation stats
2026-01-06 14:42:56,597 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.AWAITING_USER_INPUT
2026-01-06 14:42:56,600 - INFO - Saved conversation stats
2026-01-06 14:42:56,602 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.AWAITING_USER_INPUT to AgentState.RUNNING
2026-01-06 14:42:56,604 - INFO - Saved conversation stats
2026-01-06 14:42:58,806 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.AWAITING_USER_INPUT
2026-01-06 14:42:58,838 - INFO - Saved conversation stats
2026-01-06 14:42:58,839 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.AWAITING_USER_INPUT to AgentState.RUNNING
2026-01-06 14:42:58,846 - INFO - Saved conversation stats
2026-01-06 14:43:01,011 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.AWAITING_USER_INPUT
2026-01-06 14:43:01,014 - INFO - Saved conversation stats
2026-01-06 14:43:01,015 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.AWAITING_USER_INPUT to AgentState.RUNNING
2026-01-06 14:43:01,017 - INFO - Saved conversation stats
2026-01-06 14:43:32,400 - INFO - [Agent Controller a6dae39a-6544-45-e020999c52a0916] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.FINISHED
2026-01-06 14:43:32,403 - INFO - Saved conversation stats
2026-01-06 14:43:33,132 - INFO - ------------------------------
2026-01-06 14:43:33,133 - INFO - BEGIN Runtime Completion Fn
2026-01-06 14:43:33,133 - INFO - ------------------------------
2026-01-06 14:43:33,133 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cd /workspace/django__django__3.0
2026-01-06 14:43:33,754 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:43:33,755 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git config --global core.pager ""
2026-01-06 14:43:34,423 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:43:34,423 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
find . -type d -name .git -not -path "./.git"
2026-01-06 14:43:35,080 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:43:35,081 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git add -A
2026-01-06 14:43:35,701 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:43:35,701 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
for file in $(git status --porcelain | grep -E "^(M| M|\?\?|A| A)" | cut -c4-); do
        if [ -f "$file" ] && (file "$file" | grep -q "executable" || git check-attr binary "$file" | grep -q "binary: set"); then
            git rm -f "$file" 2>/dev/null || rm -f "$file"
            echo "Removed: $file"
        fi
    done
2026-01-06 14:43:36,326 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:43:36,326 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git diff --no-color --cached 93e892bb645b16ebaf287beb5fe7f3ffe8d10408 > patch.diff
2026-01-06 14:43:36,947 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "f5686eeaef75",
  "working_dir": "/workspace/django__django__3.0",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.0]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:43:36,947 - INFO - FileReadAction(path='patch.diff', start=0, end=-1, thought='', action=<ActionType.READ: 'read'>, security_risk=<ActionSecurityRisk.UNKNOWN: -1>, impl_source=<FileReadSource.DEFAULT: 'default'>, view_range=None)
2026-01-06 14:43:36,953 - INFO - [Read from /workspace/django__django__3.0/patch.diff is successful.]
diff --git a/debug_conflicts.py b/debug_conflicts.py
new file mode 100644
index 0000000000..0b8b0402fd
--- /dev/null
+++ b/debug_conflicts.py
@@ -0,0 +1,86 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media, MediaOrderConflictWarning
+
+print("=== Debugging conflict detection ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+print(f"Testing with conflicting lists: {conflict_lists}")
+
+# Let's manually trace through the multi_merge logic
+all_elements = []
+for lst in conflict_lists:
+    for item in lst:
+        if item not in all_elements:
+            all_elements.append(item)
+
+print(f"All elements: {all_elements}")
+
+# Build order constraints
+order_constraints = {}
+for lst in conflict_lists:
+    for i in range(len(lst)):
+        for j in range(i + 1, len(lst)):
+            a, b = lst[i], lst[j]
+            key = (a, b)
+            if key not in order_constraints:
+                order_constraints[key] = []
+            order_constraints[key].append(lst)
+
+print(f"Order constraints: {order_constraints}")
+
+# Check for conflicts
+warned_pairs = set()
+for (a, b), lists_with_order in order_constraints.items():
+    reverse_key = (b, a)
+    print(f"Checking pair ({a}, {b}), reverse key: {reverse_key}")
+    if reverse_key in order_constraints and (a, b) not in warned_pairs:
+        print(f"Found conflict between {a} and {b}")
+        warnings.warn(
+            'Detected duplicate Media files in an opposite order:\n'
+            '%s\n%s' % (a, b),
+            MediaOrderConflictWarning,
+        )
+        warned_pairs.add((a, b))
+        warned_pairs.add((b, a))
+
+print(f"Warned pairs: {warned_pairs}")
+
+# Now test the actual multi_merge
+print("\n=== Testing actual multi_merge ===")
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    result = Media.multi_merge(conflict_lists)
+    print(f"Result: {result}")
+    print(f"Warnings captured: {len(w)}")
+    for warning in w:
+        print(f"Warning: {warning.message}")
diff --git a/debug_loop.py b/debug_loop.py
new file mode 100644
index 0000000000..7cb57c0042
--- /dev/null
+++ b/debug_loop.py
@@ -0,0 +1,76 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media, MediaOrderConflictWarning
+
+print("=== Debugging the loop logic ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+# Manually build order_constraints
+order_constraints = {}
+for lst in conflict_lists:
+    for i in range(len(lst)):
+        for j in range(i + 1, len(lst)):
+            a, b = lst[i], lst[j]
+            key = (a, b)
+            if key not in order_constraints:
+                order_constraints[key] = []
+            order_constraints[key].append(lst)
+
+print(f"Order constraints: {order_constraints}")
+
+# Simulate the conflict detection loop
+warned_pairs = set()
+for (a, b), lists_with_order in order_constraints.items():
+    print(f"Processing pair ({a}, {b})")
+    print(f"  Is ({a}, {b}) in warned_pairs? {(a, b) in warned_pairs}")
+    
+    if (a, b) not in warned_pairs:
+        reverse_key = (b, a)
+        print(f"  Reverse key: {reverse_key}")
+        print(f"  Is reverse_key in order_constraints? {reverse_key in order_constraints}")
+        
+        if reverse_key in order_constraints:
+            print(f"  -> Found conflict, warning about ({a}, {b})")
+            warnings.warn(
+                'Detected duplicate Media files in an opposite order:\n'
+                '%s\n%s' % (a, b),
+                MediaOrderConflictWarning,
+            )
+            warned_pairs.add((a, b))
+            warned_pairs.add((b, a))
+            print(f"  -> Added to warned_pairs: {warned_pairs}")
+        else:
+            print(f"  -> No conflict")
+    else:
+        print(f"  -> Already warned about this pair")
+
+print(f"Final warned_pairs: {warned_pairs}")
diff --git a/debug_merge.py b/debug_merge.py
new file mode 100644
index 0000000000..60017196d8
--- /dev/null
+++ b/debug_merge.py
@@ -0,0 +1,58 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+    )
+    django.setup()
+
+from django.forms.widgets import Media
+
+# Capture warnings to see the issue
+warnings.simplefilter('always')
+
+print("=== Testing merge step by step ===")
+
+# Step 1: ColorPicker + SimpleTextWidget
+list1 = ['color-picker.js']
+list2 = ['text-editor.js']
+result1 = Media.merge(list1, list2)
+print(f"Merge {list1} + {list2} = {result1}")
+
+# Step 2: Step1 result + FancyTextWidget
+list3 = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+result2 = Media.merge(result1, list3)
+print(f"Merge {result1} + {list3} = {result2}")
+
+print("\n=== Testing what should happen ===")
+print("All files: ['color-picker.js', 'text-editor.js', 'text-editor-extras.js']")
+print("Dependencies: text-editor.js -> text-editor-extras.js")
+print("Expected order: ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']")
+
+print("\n=== Testing alternative merge strategies ===")
+
+# What if we merge in a different order?
+alt1 = Media.merge(['text-editor.js'], ['color-picker.js'])
+print(f"Alternative 1: Merge ['text-editor.js'] + ['color-picker.js'] = {alt1}")
+
+alt2 = Media.merge(alt1, ['text-editor-extras.js'])
+print(f"Alternative 2: Merge {alt1} + ['text-editor-extras.js'] = {alt2}")
+
+# What if we merge all three at once conceptually?
+print(f"\nAll three lists:")
+print(f"  List 1: {list1}")
+print(f"  List 2: {list2}")
+print(f"  List 3: {list3}")
+print(f"  All unique files: {list(set(list1 + list2 + list3))}")
diff --git a/django/forms/widgets.py b/django/forms/widgets.py
index 02aa32b207..ccb4af2880 100644
--- a/django/forms/widgets.py
+++ b/django/forms/widgets.py
@@ -70,11 +70,11 @@ class Media:
 
     @property
     def _js(self):
-        js = self._js_lists[0]
         # filter(None, ...) avoids calling merge() with empty lists.
-        for obj in filter(None, self._js_lists[1:]):
-            js = self.merge(js, obj)
-        return js
+        js_lists = list(filter(None, self._js_lists))
+        if len(js_lists) == 1:
+            return js_lists[0]
+        return self.multi_merge(js_lists)
 
     def render(self):
         return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
@@ -149,6 +149,88 @@ class Media:
                 last_insert_index = index
         return combined_list
 
+    @staticmethod
+    def multi_merge(lists):
+        """
+        Merge multiple lists while trying to keep the relative order of the elements.
+        Warn if the lists have the same two elements in a different relative order.
+        
+        This method builds a dependency graph from all the ordering constraints
+        in all lists and then performs a topological sort to get the final order.
+        """
+        # Collect all unique elements
+        all_elements = []
+        for lst in lists:
+            for item in lst:
+                if item not in all_elements:
+                    all_elements.append(item)
+        
+        # Build dependency graph: for each list, add edges to preserve order
+        # graph[x] contains elements that must come after x
+        graph = {item: set() for item in all_elements}
+        # in_degree[x] counts how many elements must come before x
+        in_degree = {item: 0 for item in all_elements}
+        
+        # Track order constraints to detect conflicts
+        order_constraints = {}  # (a, b): [lists where a comes before b]
+        
+        for lst in lists:
+            for i in range(len(lst)):
+                for j in range(i + 1, len(lst)):
+                    a, b = lst[i], lst[j]
+                    key = (a, b)
+                    if key not in order_constraints:
+                        order_constraints[key] = []
+                    order_constraints[key].append(lst)
+                    
+                    # Add edge a -> b (a must come before b)
+                    if b not in graph[a]:
+                        graph[a].add(b)
+                        in_degree[b] += 1
+        
+        # Check for conflicts (same pair in different orders)
+        warned_pairs = set()
+        for (a, b), lists_with_order in order_constraints.items():
+            if (a, b) not in warned_pairs:
+                reverse_key = (b, a)
+                if reverse_key in order_constraints:
+                    # Found a conflict: a before b in some lists, b before a in others
+                    warnings.warn(
+                        'Detected duplicate Media files in an opposite order:\n'
+                        '%s\n%s' % (a, b),
+                        MediaOrderConflictWarning,
+                    )
+                    warned_pairs.add((a, b))
+                    warned_pairs.add((b, a))
+        
+        # Topological sort
+        result = []
+        # Start with elements that have no prerequisites
+        queue = [item for item in all_elements if in_degree[item] == 0]
+        
+        while queue:
+            # For deterministic results, sort the queue
+            queue.sort()
+            current = queue.pop(0)
+            result.append(current)
+            
+            # Remove current from the graph and update in_degrees
+            for neighbor in list(graph[current]):
+                in_degree[neighbor] -= 1
+                if in_degree[neighbor] == 0:
+                    queue.append(neighbor)
+            graph[current] = set()
+        
+        # If we couldn't order all elements, there's a cycle
+        if len(result) != len(all_elements):
+            # Fall back to the original sequential merge to avoid breaking things
+            combined = lists[0]
+            for lst in lists[1:]:
+                combined = Media.merge(combined, lst)
+            return combined
+        
+        return result
+
     def __add__(self, other):
         combined = Media()
         combined._css_lists = self._css_lists + other._css_lists
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..42d81c786f
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,63 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+    )
+    django.setup()
+
+from django import forms
+
+# Capture warnings to see the issue
+warnings.simplefilter('always')
+
+class ColorPicker(forms.Widget):
+    class Media:
+        js = ['color-picker.js']
+
+class SimpleTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js']
+
+class FancyTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+
+class MyForm(forms.Form):
+    background_color = forms.CharField(widget=ColorPicker())
+    intro = forms.CharField(widget=SimpleTextWidget())
+    body = forms.CharField(widget=FancyTextWidget())
+
+print("=== Testing individual widget media ===")
+print("ColorPicker media:", ColorPicker().media)
+print("SimpleTextWidget media:", SimpleTextWidget().media)
+print("FancyTextWidget media:", FancyTextWidget().media)
+
+print("\n=== Testing step-by-step combination ===")
+step1 = ColorPicker().media + SimpleTextWidget().media
+print("Step 1 (ColorPicker + SimpleTextWidget):", step1)
+print("Step 1 JS:", step1._js)
+
+step2 = step1 + FancyTextWidget().media
+print("Step 2 (Step1 + FancyTextWidget):", step2)
+print("Step 2 JS:", step2._js)
+
+print("\n=== Testing final form media ===")
+form_media = MyForm().media
+print("Final form media:", form_media)
+print("Final form JS:", form_media._js)
+
+print("\n=== Expected order ===")
+print("Expected: ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']")
diff --git a/test_conflicts_only.py b/test_conflicts_only.py
new file mode 100644
index 0000000000..89a5550d67
--- /dev/null
+++ b/test_conflicts_only.py
@@ -0,0 +1,65 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media, MediaOrderConflictWarning
+
+print("=== Testing conflict detection in multi_merge only ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+print(f"Testing with conflicting lists: {conflict_lists}")
+
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    result = Media.multi_merge(conflict_lists)
+    print(f"Result: {result}")
+    
+    media_warnings = [warning for warning in w if issubclass(warning.category, MediaOrderConflictWarning)]
+    print(f"Number of MediaOrderConflictWarnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Warning: {warning.message}")
+
+print("\n=== Testing original issue (should have no warnings) ===")
+
+original_lists = [
+    ['color-picker.js'],
+    ['text-editor.js'],
+    ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+]
+
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    result = Media.multi_merge(original_lists)
+    print(f"Result: {result}")
+    
+    media_warnings = [warning for warning in w if issubclass(warning.category, MediaOrderConflictWarning)]
+    print(f"Number of MediaOrderConflictWarnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Warning: {warning.message}")
diff --git a/test_existing_functionality.py b/test_existing_functionality.py
new file mode 100644
index 0000000000..6b96474e85
--- /dev/null
+++ b/test_existing_functionality.py
@@ -0,0 +1,86 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media
+from django.forms import CharField, Form
+from django.forms.widgets import TextInput
+
+print("=== Testing existing merge functionality ===")
+
+# Test basic merge (from existing tests)
+result1 = Media.merge([1, 2], [2, 1])
+print(f"Media.merge([1, 2], [2, 1]) = {result1}")
+print("Expected: [1, 2]")
+
+# Test merge with no conflicts
+result2 = Media.merge(['a.js', 'b.js'], ['c.js', 'd.js'])
+print(f"Media.merge(['a.js', 'b.js'], ['c.js', 'd.js']) = {result2}")
+print("Expected: ['a.js', 'b.js', 'c.js', 'd.js']")
+
+# Test merge with some overlap
+result3 = Media.merge(['a.js', 'b.js'], ['b.js', 'c.js'])
+print(f"Media.merge(['a.js', 'b.js'], ['b.js', 'c.js']) = {result3}")
+print("Expected: ['a.js', 'b.js', 'c.js']")
+
+print("\n=== Testing multi_merge with single list ===")
+single_list = [['a.js', 'b.js']]
+result4 = Media.multi_merge(single_list)
+print(f"Media.multi_merge([['a.js', 'b.js']]) = {result4}")
+print("Expected: ['a.js', 'b.js']")
+
+print("\n=== Testing multi_merge with two lists ===")
+two_lists = [['a.js', 'b.js'], ['c.js', 'd.js']]
+result5 = Media.multi_merge(two_lists)
+print(f"Media.multi_merge([['a.js', 'b.js'], ['c.js', 'd.js']]) = {result5}")
+print("Expected: ['a.js', 'b.js', 'c.js', 'd.js']")
+
+print("\n=== Testing media property with single widget ===")
+class MyWidget(TextInput):
+    class Media:
+        js = ['script.js']
+
+widget = MyWidget()
+print(f"Single widget media JS: {widget.media._js}")
+print("Expected: ['script.js']")
+
+print("\n=== Testing media property with multiple widgets ===")
+class Widget1(TextInput):
+    class Media:
+        js = ['script1.js']
+
+class Widget2(TextInput):
+    class Media:
+        js = ['script2.js']
+
+class MyForm(Form):
+    field1 = CharField(widget=Widget1())
+    field2 = CharField(widget=Widget2())
+
+form = MyForm()
+print(f"Form media JS: {form.media._js}")
+print("Expected: ['script1.js', 'script2.js']")
+
+print("\n=== All tests completed ===")
diff --git a/test_issue_fix.py b/test_issue_fix.py
new file mode 100644
index 0000000000..cdf979569f
--- /dev/null
+++ b/test_issue_fix.py
@@ -0,0 +1,131 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django import forms
+
+# Capture warnings
+warnings.simplefilter('always')
+
+print("=== Testing the exact issue from the bug report ===")
+
+class ColorPicker(forms.Widget):
+    class Media:
+        js = ['color-picker.js']
+
+class SimpleTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js']
+
+class FancyTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+
+class MyForm(forms.Form):
+    background_color = forms.CharField(widget=ColorPicker())
+    intro = forms.CharField(widget=SimpleTextWidget())
+    body = forms.CharField(widget=FancyTextWidget())
+
+print("Testing MyForm().media...")
+form_media = MyForm().media
+actual_order = form_media._js
+expected_order = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+
+print(f"Actual order: {actual_order}")
+print(f"Expected order: {expected_order}")
+print(f"Order is correct: {actual_order == expected_order}")
+
+print("\n=== Testing that no unnecessary warnings are generated ===")
+
+# Reset warning capture
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    form_media = MyForm().media
+    actual_order = form_media._js
+    
+    # Filter out any warnings that are not MediaOrderConflictWarning
+    media_warnings = [warning for warning in w if issubclass(warning.category, forms.widgets.MediaOrderConflictWarning)]
+    
+    print(f"Number of MediaOrderConflictWarnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Warning: {warning.message}")
+
+print("\n=== Testing edge cases ===")
+
+# Test with more complex dependencies
+class ComplexWidget1(forms.Widget):
+    class Media:
+        js = ['jquery.js', 'plugin1.js']
+
+class ComplexWidget2(forms.Widget):
+    class Media:
+        js = ['jquery.js', 'plugin2.js']
+
+class ComplexWidget3(forms.Widget):
+    class Media:
+        js = ['plugin1.js', 'plugin3.js']
+
+class ComplexForm(forms.Form):
+    field1 = forms.CharField(widget=ComplexWidget1())
+    field2 = forms.CharField(widget=ComplexWidget2())
+    field3 = forms.CharField(widget=ComplexWidget3())
+
+complex_media = ComplexForm().media
+print(f"Complex form JS order: {complex_media._js}")
+# jquery.js should come first, then plugin1.js and plugin2.js, then plugin3.js
+expected_complex = ['jquery.js', 'plugin1.js', 'plugin2.js', 'plugin3.js']
+print(f"Expected complex order: {expected_complex}")
+print(f"Complex order is correct: {complex_media._js == expected_complex}")
+
+print("\n=== Testing that real conflicts are still detected ===")
+
+class ConflictWidget1(forms.Widget):
+    class Media:
+        js = ['a.js', 'b.js']
+
+class ConflictWidget2(forms.Widget):
+    class Media:
+        js = ['b.js', 'a.js']
+
+class ConflictForm(forms.Form):
+    field1 = forms.CharField(widget=ConflictWidget1())
+    field2 = forms.CharField(widget=ConflictWidget2())
+
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    conflict_media = ConflictForm().media
+    
+    media_warnings = [warning for warning in w if issubclass(warning.category, forms.widgets.MediaOrderConflictWarning)]
+    
+    print(f"Conflict form JS order: {conflict_media._js}")
+    print(f"Number of conflict warnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Conflict warning: {warning.message}")
+
+print("\n=== Summary ===")
+print("✓ Original issue is fixed")
+print("✓ No unnecessary warnings for the original case")
+print("✓ Complex dependencies are handled correctly")
+print("✓ Real conflicts are still detected")
diff --git a/test_multi_merge.py b/test_multi_merge.py
new file mode 100644
index 0000000000..40636e1104
--- /dev/null
+++ b/test_multi_merge.py
@@ -0,0 +1,75 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+    )
+    django.setup()
+
+from django.forms.widgets import Media
+
+# Capture warnings to see the issue
+warnings.simplefilter('always')
+
+print("=== Testing multi_merge method ===")
+
+# Test the case from the issue
+lists = [
+    ['color-picker.js'],
+    ['text-editor.js'],
+    ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+]
+
+result = Media.multi_merge(lists)
+print(f"Multi-merge {lists} = {result}")
+print(f"Expected: ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']")
+print(f"Match: {result == ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']}")
+
+print("\n=== Testing conflict detection ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+print(f"Testing with conflicting lists: {conflict_lists}")
+conflict_result = Media.multi_merge(conflict_lists)
+print(f"Result: {conflict_result}")
+
+print("\n=== Testing no conflicts ===")
+
+# Test with no conflicts
+no_conflict_lists = [
+    ['a.js', 'b.js'],
+    ['c.js', 'd.js']
+]
+
+print(f"Testing with non-conflicting lists: {no_conflict_lists}")
+no_conflict_result = Media.multi_merge(no_conflict_lists)
+print(f"Result: {no_conflict_result}")
+
+print("\n=== Testing complex dependencies ===")
+
+# Test with complex dependencies
+complex_lists = [
+    ['a.js', 'b.js', 'c.js'],
+    ['b.js', 'd.js'],
+    ['a.js', 'e.js', 'd.js']
+]
+
+print(f"Testing with complex dependencies: {complex_lists}")
+complex_result = Media.multi_merge(complex_lists)
+print(f"Result: {complex_result}")

2026-01-06 14:43:36,954 - INFO - ------------------------------
2026-01-06 14:43:36,954 - INFO - END Runtime Completion Fn
2026-01-06 14:43:36,954 - INFO - ------------------------------
2026-01-06 14:43:36,955 - INFO - Got git diff for instance django__django-11019:
--------
diff --git a/debug_conflicts.py b/debug_conflicts.py
new file mode 100644
index 0000000000..0b8b0402fd
--- /dev/null
+++ b/debug_conflicts.py
@@ -0,0 +1,86 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media, MediaOrderConflictWarning
+
+print("=== Debugging conflict detection ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+print(f"Testing with conflicting lists: {conflict_lists}")
+
+# Let's manually trace through the multi_merge logic
+all_elements = []
+for lst in conflict_lists:
+    for item in lst:
+        if item not in all_elements:
+            all_elements.append(item)
+
+print(f"All elements: {all_elements}")
+
+# Build order constraints
+order_constraints = {}
+for lst in conflict_lists:
+    for i in range(len(lst)):
+        for j in range(i + 1, len(lst)):
+            a, b = lst[i], lst[j]
+            key = (a, b)
+            if key not in order_constraints:
+                order_constraints[key] = []
+            order_constraints[key].append(lst)
+
+print(f"Order constraints: {order_constraints}")
+
+# Check for conflicts
+warned_pairs = set()
+for (a, b), lists_with_order in order_constraints.items():
+    reverse_key = (b, a)
+    print(f"Checking pair ({a}, {b}), reverse key: {reverse_key}")
+    if reverse_key in order_constraints and (a, b) not in warned_pairs:
+        print(f"Found conflict between {a} and {b}")
+        warnings.warn(
+            'Detected duplicate Media files in an opposite order:\n'
+            '%s\n%s' % (a, b),
+            MediaOrderConflictWarning,
+        )
+        warned_pairs.add((a, b))
+        warned_pairs.add((b, a))
+
+print(f"Warned pairs: {warned_pairs}")
+
+# Now test the actual multi_merge
+print("\n=== Testing actual multi_merge ===")
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    result = Media.multi_merge(conflict_lists)
+    print(f"Result: {result}")
+    print(f"Warnings captured: {len(w)}")
+    for warning in w:
+        print(f"Warning: {warning.message}")
diff --git a/debug_loop.py b/debug_loop.py
new file mode 100644
index 0000000000..7cb57c0042
--- /dev/null
+++ b/debug_loop.py
@@ -0,0 +1,76 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media, MediaOrderConflictWarning
+
+print("=== Debugging the loop logic ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+# Manually build order_constraints
+order_constraints = {}
+for lst in conflict_lists:
+    for i in range(len(lst)):
+        for j in range(i + 1, len(lst)):
+            a, b = lst[i], lst[j]
+            key = (a, b)
+            if key not in order_constraints:
+                order_constraints[key] = []
+            order_constraints[key].append(lst)
+
+print(f"Order constraints: {order_constraints}")
+
+# Simulate the conflict detection loop
+warned_pairs = set()
+for (a, b), lists_with_order in order_constraints.items():
+    print(f"Processing pair ({a}, {b})")
+    print(f"  Is ({a}, {b}) in warned_pairs? {(a, b) in warned_pairs}")
+    
+    if (a, b) not in warned_pairs:
+        reverse_key = (b, a)
+        print(f"  Reverse key: {reverse_key}")
+        print(f"  Is reverse_key in order_constraints? {reverse_key in order_constraints}")
+        
+        if reverse_key in order_constraints:
+            print(f"  -> Found conflict, warning about ({a}, {b})")
+            warnings.warn(
+                'Detected duplicate Media files in an opposite order:\n'
+                '%s\n%s' % (a, b),
+                MediaOrderConflictWarning,
+            )
+            warned_pairs.add((a, b))
+            warned_pairs.add((b, a))
+            print(f"  -> Added to warned_pairs: {warned_pairs}")
+        else:
+            print(f"  -> No conflict")
+    else:
+        print(f"  -> Already warned about this pair")
+
+print(f"Final warned_pairs: {warned_pairs}")
diff --git a/debug_merge.py b/debug_merge.py
new file mode 100644
index 0000000000..60017196d8
--- /dev/null
+++ b/debug_merge.py
@@ -0,0 +1,58 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+    )
+    django.setup()
+
+from django.forms.widgets import Media
+
+# Capture warnings to see the issue
+warnings.simplefilter('always')
+
+print("=== Testing merge step by step ===")
+
+# Step 1: ColorPicker + SimpleTextWidget
+list1 = ['color-picker.js']
+list2 = ['text-editor.js']
+result1 = Media.merge(list1, list2)
+print(f"Merge {list1} + {list2} = {result1}")
+
+# Step 2: Step1 result + FancyTextWidget
+list3 = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+result2 = Media.merge(result1, list3)
+print(f"Merge {result1} + {list3} = {result2}")
+
+print("\n=== Testing what should happen ===")
+print("All files: ['color-picker.js', 'text-editor.js', 'text-editor-extras.js']")
+print("Dependencies: text-editor.js -> text-editor-extras.js")
+print("Expected order: ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']")
+
+print("\n=== Testing alternative merge strategies ===")
+
+# What if we merge in a different order?
+alt1 = Media.merge(['text-editor.js'], ['color-picker.js'])
+print(f"Alternative 1: Merge ['text-editor.js'] + ['color-picker.js'] = {alt1}")
+
+alt2 = Media.merge(alt1, ['text-editor-extras.js'])
+print(f"Alternative 2: Merge {alt1} + ['text-editor-extras.js'] = {alt2}")
+
+# What if we merge all three at once conceptually?
+print(f"\nAll three lists:")
+print(f"  List 1: {list1}")
+print(f"  List 2: {list2}")
+print(f"  List 3: {list3}")
+print(f"  All unique files: {list(set(list1 + list2 + list3))}")
diff --git a/django/forms/widgets.py b/django/forms/widgets.py
index 02aa32b207..ccb4af2880 100644
--- a/django/forms/widgets.py
+++ b/django/forms/widgets.py
@@ -70,11 +70,11 @@ class Media:
 
     @property
     def _js(self):
-        js = self._js_lists[0]
         # filter(None, ...) avoids calling merge() with empty lists.
-        for obj in filter(None, self._js_lists[1:]):
-            js = self.merge(js, obj)
-        return js
+        js_lists = list(filter(None, self._js_lists))
+        if len(js_lists) == 1:
+            return js_lists[0]
+        return self.multi_merge(js_lists)
 
     def render(self):
         return mark_safe('\n'.join(chain.from_iterable(getattr(self, 'render_' + name)() for name in MEDIA_TYPES)))
@@ -149,6 +149,88 @@ class Media:
                 last_insert_index = index
         return combined_list
 
+    @staticmethod
+    def multi_merge(lists):
+        """
+        Merge multiple lists while trying to keep the relative order of the elements.
+        Warn if the lists have the same two elements in a different relative order.
+        
+        This method builds a dependency graph from all the ordering constraints
+        in all lists and then performs a topological sort to get the final order.
+        """
+        # Collect all unique elements
+        all_elements = []
+        for lst in lists:
+            for item in lst:
+                if item not in all_elements:
+                    all_elements.append(item)
+        
+        # Build dependency graph: for each list, add edges to preserve order
+        # graph[x] contains elements that must come after x
+        graph = {item: set() for item in all_elements}
+        # in_degree[x] counts how many elements must come before x
+        in_degree = {item: 0 for item in all_elements}
+        
+        # Track order constraints to detect conflicts
+        order_constraints = {}  # (a, b): [lists where a comes before b]
+        
+        for lst in lists:
+            for i in range(len(lst)):
+                for j in range(i + 1, len(lst)):
+                    a, b = lst[i], lst[j]
+                    key = (a, b)
+                    if key not in order_constraints:
+                        order_constraints[key] = []
+                    order_constraints[key].append(lst)
+                    
+                    # Add edge a -> b (a must come before b)
+                    if b not in graph[a]:
+                        graph[a].add(b)
+                        in_degree[b] += 1
+        
+        # Check for conflicts (same pair in different orders)
+        warned_pairs = set()
+        for (a, b), lists_with_order in order_constraints.items():
+            if (a, b) not in warned_pairs:
+                reverse_key = (b, a)
+                if reverse_key in order_constraints:
+                    # Found a conflict: a before b in some lists, b before a in others
+                    warnings.warn(
+                        'Detected duplicate Media files in an opposite order:\n'
+                        '%s\n%s' % (a, b),
+                        MediaOrderConflictWarning,
+                    )
+                    warned_pairs.add((a, b))
+                    warned_pairs.add((b, a))
+        
+        # Topological sort
+        result = []
+        # Start with elements that have no prerequisites
+        queue = [item for item in all_elements if in_degree[item] == 0]
+        
+        while queue:
+            # For deterministic results, sort the queue
+            queue.sort()
+            current = queue.pop(0)
+            result.append(current)
+            
+            # Remove current from the graph and update in_degrees
+            for neighbor in list(graph[current]):
+                in_degree[neighbor] -= 1
+                if in_degree[neighbor] == 0:
+                    queue.append(neighbor)
+            graph[current] = set()
+        
+        # If we couldn't order all elements, there's a cycle
+        if len(result) != len(all_elements):
+            # Fall back to the original sequential merge to avoid breaking things
+            combined = lists[0]
+            for lst in lists[1:]:
+                combined = Media.merge(combined, lst)
+            return combined
+        
+        return result
+
     def __add__(self, other):
         combined = Media()
         combined._css_lists = self._css_lists + other._css_lists
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..42d81c786f
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,63 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+    )
+    django.setup()
+
+from django import forms
+
+# Capture warnings to see the issue
+warnings.simplefilter('always')
+
+class ColorPicker(forms.Widget):
+    class Media:
+        js = ['color-picker.js']
+
+class SimpleTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js']
+
+class FancyTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+
+class MyForm(forms.Form):
+    background_color = forms.CharField(widget=ColorPicker())
+    intro = forms.CharField(widget=SimpleTextWidget())
+    body = forms.CharField(widget=FancyTextWidget())
+
+print("=== Testing individual widget media ===")
+print("ColorPicker media:", ColorPicker().media)
+print("SimpleTextWidget media:", SimpleTextWidget().media)
+print("FancyTextWidget media:", FancyTextWidget().media)
+
+print("\n=== Testing step-by-step combination ===")
+step1 = ColorPicker().media + SimpleTextWidget().media
+print("Step 1 (ColorPicker + SimpleTextWidget):", step1)
+print("Step 1 JS:", step1._js)
+
+step2 = step1 + FancyTextWidget().media
+print("Step 2 (Step1 + FancyTextWidget):", step2)
+print("Step 2 JS:", step2._js)
+
+print("\n=== Testing final form media ===")
+form_media = MyForm().media
+print("Final form media:", form_media)
+print("Final form JS:", form_media._js)
+
+print("\n=== Expected order ===")
+print("Expected: ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']")
diff --git a/test_conflicts_only.py b/test_conflicts_only.py
new file mode 100644
index 0000000000..89a5550d67
--- /dev/null
+++ b/test_conflicts_only.py
@@ -0,0 +1,65 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media, MediaOrderConflictWarning
+
+print("=== Testing conflict detection in multi_merge only ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+print(f"Testing with conflicting lists: {conflict_lists}")
+
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    result = Media.multi_merge(conflict_lists)
+    print(f"Result: {result}")
+    
+    media_warnings = [warning for warning in w if issubclass(warning.category, MediaOrderConflictWarning)]
+    print(f"Number of MediaOrderConflictWarnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Warning: {warning.message}")
+
+print("\n=== Testing original issue (should have no warnings) ===")
+
+original_lists = [
+    ['color-picker.js'],
+    ['text-editor.js'],
+    ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+]
+
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    result = Media.multi_merge(original_lists)
+    print(f"Result: {result}")
+    
+    media_warnings = [warning for warning in w if issubclass(warning.category, MediaOrderConflictWarning)]
+    print(f"Number of MediaOrderConflictWarnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Warning: {warning.message}")
diff --git a/test_existing_functionality.py b/test_existing_functionality.py
new file mode 100644
index 0000000000..6b96474e85
--- /dev/null
+++ b/test_existing_functionality.py
@@ -0,0 +1,86 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django.forms.widgets import Media
+from django.forms import CharField, Form
+from django.forms.widgets import TextInput
+
+print("=== Testing existing merge functionality ===")
+
+# Test basic merge (from existing tests)
+result1 = Media.merge([1, 2], [2, 1])
+print(f"Media.merge([1, 2], [2, 1]) = {result1}")
+print("Expected: [1, 2]")
+
+# Test merge with no conflicts
+result2 = Media.merge(['a.js', 'b.js'], ['c.js', 'd.js'])
+print(f"Media.merge(['a.js', 'b.js'], ['c.js', 'd.js']) = {result2}")
+print("Expected: ['a.js', 'b.js', 'c.js', 'd.js']")
+
+# Test merge with some overlap
+result3 = Media.merge(['a.js', 'b.js'], ['b.js', 'c.js'])
+print(f"Media.merge(['a.js', 'b.js'], ['b.js', 'c.js']) = {result3}")
+print("Expected: ['a.js', 'b.js', 'c.js']")
+
+print("\n=== Testing multi_merge with single list ===")
+single_list = [['a.js', 'b.js']]
+result4 = Media.multi_merge(single_list)
+print(f"Media.multi_merge([['a.js', 'b.js']]) = {result4}")
+print("Expected: ['a.js', 'b.js']")
+
+print("\n=== Testing multi_merge with two lists ===")
+two_lists = [['a.js', 'b.js'], ['c.js', 'd.js']]
+result5 = Media.multi_merge(two_lists)
+print(f"Media.multi_merge([['a.js', 'b.js'], ['c.js', 'd.js']]) = {result5}")
+print("Expected: ['a.js', 'b.js', 'c.js', 'd.js']")
+
+print("\n=== Testing media property with single widget ===")
+class MyWidget(TextInput):
+    class Media:
+        js = ['script.js']
+
+widget = MyWidget()
+print(f"Single widget media JS: {widget.media._js}")
+print("Expected: ['script.js']")
+
+print("\n=== Testing media property with multiple widgets ===")
+class Widget1(TextInput):
+    class Media:
+        js = ['script1.js']
+
+class Widget2(TextInput):
+    class Media:
+        js = ['script2.js']
+
+class MyForm(Form):
+    field1 = CharField(widget=Widget1())
+    field2 = CharField(widget=Widget2())
+
+form = MyForm()
+print(f"Form media JS: {form.media._js}")
+print("Expected: ['script1.js', 'script2.js']")
+
+print("\n=== All tests completed ===")
diff --git a/test_issue_fix.py b/test_issue_fix.py
new file mode 100644
index 0000000000..cdf979569f
--- /dev/null
+++ b/test_issue_fix.py
@@ -0,0 +1,131 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        }
+    )
+    django.setup()
+
+from django import forms
+
+# Capture warnings
+warnings.simplefilter('always')
+
+print("=== Testing the exact issue from the bug report ===")
+
+class ColorPicker(forms.Widget):
+    class Media:
+        js = ['color-picker.js']
+
+class SimpleTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js']
+
+class FancyTextWidget(forms.Widget):
+    class Media:
+        js = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+
+class MyForm(forms.Form):
+    background_color = forms.CharField(widget=ColorPicker())
+    intro = forms.CharField(widget=SimpleTextWidget())
+    body = forms.CharField(widget=FancyTextWidget())
+
+print("Testing MyForm().media...")
+form_media = MyForm().media
+actual_order = form_media._js
+expected_order = ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+
+print(f"Actual order: {actual_order}")
+print(f"Expected order: {expected_order}")
+print(f"Order is correct: {actual_order == expected_order}")
+
+print("\n=== Testing that no unnecessary warnings are generated ===")
+
+# Reset warning capture
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    form_media = MyForm().media
+    actual_order = form_media._js
+    
+    # Filter out any warnings that are not MediaOrderConflictWarning
+    media_warnings = [warning for warning in w if issubclass(warning.category, forms.widgets.MediaOrderConflictWarning)]
+    
+    print(f"Number of MediaOrderConflictWarnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Warning: {warning.message}")
+
+print("\n=== Testing edge cases ===")
+
+# Test with more complex dependencies
+class ComplexWidget1(forms.Widget):
+    class Media:
+        js = ['jquery.js', 'plugin1.js']
+
+class ComplexWidget2(forms.Widget):
+    class Media:
+        js = ['jquery.js', 'plugin2.js']
+
+class ComplexWidget3(forms.Widget):
+    class Media:
+        js = ['plugin1.js', 'plugin3.js']
+
+class ComplexForm(forms.Form):
+    field1 = forms.CharField(widget=ComplexWidget1())
+    field2 = forms.CharField(widget=ComplexWidget2())
+    field3 = forms.CharField(widget=ComplexWidget3())
+
+complex_media = ComplexForm().media
+print(f"Complex form JS order: {complex_media._js}")
+# jquery.js should come first, then plugin1.js and plugin2.js, then plugin3.js
+expected_complex = ['jquery.js', 'plugin1.js', 'plugin2.js', 'plugin3.js']
+print(f"Expected complex order: {expected_complex}")
+print(f"Complex order is correct: {complex_media._js == expected_complex}")
+
+print("\n=== Testing that real conflicts are still detected ===")
+
+class ConflictWidget1(forms.Widget):
+    class Media:
+        js = ['a.js', 'b.js']
+
+class ConflictWidget2(forms.Widget):
+    class Media:
+        js = ['b.js', 'a.js']
+
+class ConflictForm(forms.Form):
+    field1 = forms.CharField(widget=ConflictWidget1())
+    field2 = forms.CharField(widget=ConflictWidget2())
+
+with warnings.catch_warnings(record=True) as w:
+    warnings.simplefilter("always")
+    conflict_media = ConflictForm().media
+    
+    media_warnings = [warning for warning in w if issubclass(warning.category, forms.widgets.MediaOrderConflictWarning)]
+    
+    print(f"Conflict form JS order: {conflict_media._js}")
+    print(f"Number of conflict warnings: {len(media_warnings)}")
+    for warning in media_warnings:
+        print(f"Conflict warning: {warning.message}")
+
+print("\n=== Summary ===")
+print("✓ Original issue is fixed")
+print("✓ No unnecessary warnings for the original case")
+print("✓ Complex dependencies are handled correctly")
+print("✓ Real conflicts are still detected")
diff --git a/test_multi_merge.py b/test_multi_merge.py
new file mode 100644
index 0000000000..40636e1104
--- /dev/null
+++ b/test_multi_merge.py
@@ -0,0 +1,75 @@
+#!/usr/bin/env python3
+
+import warnings
+import os
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        STATIC_URL='/static/',
+    )
+    django.setup()
+
+from django.forms.widgets import Media
+
+# Capture warnings to see the issue
+warnings.simplefilter('always')
+
+print("=== Testing multi_merge method ===")
+
+# Test the case from the issue
+lists = [
+    ['color-picker.js'],
+    ['text-editor.js'],
+    ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']
+]
+
+result = Media.multi_merge(lists)
+print(f"Multi-merge {lists} = {result}")
+print(f"Expected: ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']")
+print(f"Match: {result == ['text-editor.js', 'text-editor-extras.js', 'color-picker.js']}")
+
+print("\n=== Testing conflict detection ===")
+
+# Test with actual conflicts
+conflict_lists = [
+    ['a.js', 'b.js'],
+    ['b.js', 'a.js']
+]
+
+print(f"Testing with conflicting lists: {conflict_lists}")
+conflict_result = Media.multi_merge(conflict_lists)
+print(f"Result: {conflict_result}")
+
+print("\n=== Testing no conflicts ===")
+
+# Test with no conflicts
+no_conflict_lists = [
+    ['a.js', 'b.js'],
+    ['c.js', 'd.js']
+]
+
+print(f"Testing with non-conflicting lists: {no_conflict_lists}")
+no_conflict_result = Media.multi_merge(no_conflict_lists)
+print(f"Result: {no_conflict_result}")
+
+print("\n=== Testing complex dependencies ===")
+
+# Test with complex dependencies
+complex_lists = [
+    ['a.js', 'b.js', 'c.js'],
+    ['b.js', 'd.js'],
+    ['a.js', 'e.js', 'd.js']
+]
+
+print(f"Testing with complex dependencies: {complex_lists}")
+complex_result = Media.multi_merge(complex_lists)
+print(f"Result: {complex_result}")
--------
2026-01-06 14:43:54,575 - INFO - Using instance container image: docker.io/swebench/sweb.eval.x86_64.django_1776_django-13321:latest. Please make sure this image exists. Submit an issue on https://github.com/OpenHands/OpenHands if you run into any issues.
2026-01-06 14:43:54,576 - INFO - Resource mapping for princeton-nlp__SWE-bench_Lite-test not found.
2026-01-06 14:43:54,576 - INFO - Logging LLM completions for instance django__django-13321 to ./continuum32/princeton-nlp__SWE-bench_Lite-test/CodeActAgent/GLM-4.6-FP8_maxiter_135/llm_completions/django__django-13321
2026-01-06 14:43:54,576 - INFO - Config file not found: config.toml. Error: [Errno 2] No such file or directory: 'config.toml'
2026-01-06 14:43:54,576 - INFO - Config file not found: [Errno 2] No such file or directory: 'config.toml'. Toml values have not been applied.
