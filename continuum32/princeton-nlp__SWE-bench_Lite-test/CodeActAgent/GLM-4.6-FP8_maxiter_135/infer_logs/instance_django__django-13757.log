2026-01-06 14:47:23,792 - INFO - [LLM registry 3c24720e-420d-48a7-8495-f7f29cf1e6a2]: Registering service for agent
2026-01-06 14:47:23,842 - INFO - Building image: ghcr.io/openhands/runtime:oh_v1.0.0_r9iylm4yai6s257q_v008aov5t6vw3gr5
2026-01-06 14:57:26,366 - INFO - Image [ghcr.io/openhands/runtime:oh_v1.0.0_r9iylm4yai6s257q_v008aov5t6vw3gr5] build finished.
2026-01-06 14:57:26,372 - INFO - Re-tagged image [ghcr.io/openhands/runtime:oh_v1.0.0_r9iylm4yai6s257q_v008aov5t6vw3gr5] with more generic tag [oh_v1.0.0_r9iylm4yai6s257q]
2026-01-06 14:57:26,373 - INFO - Image ghcr.io/openhands/runtime with tags [oh_v1.0.0_r9iylm4yai6s257q_v008aov5t6vw3gr5, oh_v1.0.0_r9iylm4yai6s257q] built successfully
2026-01-06 14:57:26,432 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Starting runtime with image: ghcr.io/openhands/runtime:oh_v1.0.0_r9iylm4yai6s257q_v008aov5t6vw3gr5
2026-01-06 14:57:26,576 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Starting server with command: ['/openhands/micromamba/bin/micromamba', 'run', '-n', 'openhands', 'poetry', 'run', 'python', '-u', '-m', 'openhands.runtime.action_execution_server', '32641', '--working-dir', '/workspace', '--plugins', 'agent_skills', 'jupyter', '--username', 'root', '--user-id', '0', '--no-enable-browser']
2026-01-06 14:57:26,927 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Container started: openhands-runtime-29edf5e0-14c3-47-5f06ea5cec9bd64. VSCode URL: None
2026-01-06 14:57:26,928 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Waiting for client to become ready at http://localhost:32641...
2026-01-06 14:57:53,011 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Runtime is ready.
2026-01-06 14:57:56,123 - INFO - Successfully configured git: name=openhands, email=openhands@all-hands.dev
2026-01-06 14:57:56,125 - INFO - ------------------------------
2026-01-06 14:57:56,125 - INFO - BEGIN Runtime Initialization Fn
2026-01-06 14:57:56,125 - INFO - ------------------------------
2026-01-06 14:57:56,125 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
echo 'export SWE_INSTANCE_ID=django__django-13757' >> ~/.bashrc && echo 'export PIP_CACHE_DIR=~/.cache/pip' >> ~/.bashrc && echo "alias git='git --no-pager'" >> ~/.bashrc && git config --global core.pager "" && git config --global diff.binary false
2026-01-06 14:57:56,750 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:57:56,750 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
export USER=$(whoami); echo USER=${USER} 
2026-01-06 14:57:57,369 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
USER=root
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:57:57,370 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
mkdir -p /swe_util/eval_data/instances
2026-01-06 14:57:57,988 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:57:57,995 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cat ~/.bashrc
2026-01-06 14:57:58,621 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
source /opt/miniconda3/etc/profile.d/conda.sh && conda activate testbed

. "/openhands/bin/env"
export PATH="/usr/bin:/bin:/usr/sbin:/sbin:/openhands/micromamba/bin:$PATH"
export PLAYWRIGHT_BROWSERS_PATH=/opt/playwright-browsers
eval "$(/openhands/micromamba/bin/micromamba shell hook --shell bash)"
micromamba activate openhands 2>/dev/null || true
export ENABLE_AUTO_LINT=true
export NO_CHANGE_TIMEOUT_SECONDS=30
export OPENHANDS_EVAL_INSTANCE_ID=django__django-13757
export OPENHANDS_EVAL_JOB_ID=2779300651
export OPENHANDS_TIMING_DIR=./continuum32/princeton-nlp__SWE-bench_Lite-test/CodeActAgent/GLM-4.6-FP8_maxiter_135/timing
export SWE_INSTANCE_ID=django__django-13757
export PIP_CACHE_DIR=~/.cache/pip
alias git='git --no-pager'
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:57:58,622 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
source ~/.bashrc
2026-01-06 14:57:59,241 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace",
  "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /openhands/micromamba/envs/openhands/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:57:59,241 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
source /swe_util/instance_swe_entry.sh
2026-01-06 14:58:01,368 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
WORKSPACE_NAME: django__django__3.2
[The command completed with exit code 0.]
[Current working directory: /workspace]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:58:01,369 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cd /workspace/django__django__3.2
2026-01-06 14:58:01,988 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:58:01,988 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git reset --hard
2026-01-06 14:58:03,614 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
Updating files: 100% (6423/6423), done.
HEAD is now at 3f140dde51 Refs #32178 -- Changed BaseDatabaseFeatures.django_test_expected_failures to set().
[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:58:03,614 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
for remote_name in $(git remote); do git remote remove "${remote_name}"; done
2026-01-06 14:58:04,234 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:58:04,234 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
which python
2026-01-06 14:58:04,855 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
/opt/miniconda3/envs/testbed/bin/python
[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 14:58:04,857 - INFO - ------------------------------
2026-01-06 14:58:04,857 - INFO - END Runtime Initialization Fn
2026-01-06 14:58:04,857 - INFO - ------------------------------
2026-01-06 14:58:04,868 - INFO - [LLM registry 053e2470-dc29-46d5-be9c-949f6a67c9e7]: Registering service for agent
2026-01-06 14:58:04,885 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Selected repo: None, loading microagents from /workspace/.openhands/microagents (inside runtime)
2026-01-06 14:58:04,888 - INFO - [runtime 29edf5e0-14c3-47-5f06ea5cec9bd64] Attempting to list files in repository microagents directory: /workspace/.openhands/microagents
2026-01-06 14:58:04,890 - INFO - Loading user workspace microagents: []
2026-01-06 14:58:04,892 - INFO - AgentController 29edf5e0-14c3-47-5f06ea5cec9bd64 - created new state. start_id: 0
2026-01-06 14:58:04,900 - INFO - [Agent Controller 29edf5e0-14c3-47-5f06ea5cec9bd64] Setting agent(CodeActAgent) state from AgentState.LOADING to AgentState.RUNNING
2026-01-06 14:58:04,901 - INFO - Saved conversation stats
2026-01-06 15:05:35,032 - INFO - [Agent Controller 29edf5e0-14c3-47-5f06ea5cec9bd64] Setting agent(CodeActAgent) state from AgentState.RUNNING to AgentState.FINISHED
2026-01-06 15:05:35,033 - INFO - Saved conversation stats
2026-01-06 15:05:35,524 - INFO - ------------------------------
2026-01-06 15:05:35,525 - INFO - BEGIN Runtime Completion Fn
2026-01-06 15:05:35,525 - INFO - ------------------------------
2026-01-06 15:05:35,525 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
cd /workspace/django__django__3.2
2026-01-06 15:05:36,144 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:05:36,145 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git config --global core.pager ""
2026-01-06 15:05:36,765 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:05:36,765 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
find . -type d -name .git -not -path "./.git"
2026-01-06 15:05:37,385 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:05:37,385 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git add -A
2026-01-06 15:05:38,004 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:05:38,004 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
for file in $(git status --porcelain | grep -E "^(M| M|\?\?|A| A)" | cut -c4-); do
        if [ -f "$file" ] && (file "$file" | grep -q "executable" || git check-attr binary "$file" | grep -q "binary: set"); then
            git rm -f "$file" 2>/dev/null || rm -f "$file"
            echo "Removed: $file"
        fi
    done
2026-01-06 15:05:38,628 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
bash: file: command not found
[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:05:38,629 - INFO - **CmdRunAction (source=None, is_input=False)**
COMMAND:
git diff --no-color --cached 3f140dde51c0fe6c350acb7727bbe489a99f0632 > patch.diff
2026-01-06 15:05:39,254 - INFO - **CmdOutputObservation (source=None, exit code=0, metadata={
  "exit_code": 0,
  "pid": -1,
  "username": "root",
  "hostname": "b88d1e5d2f51",
  "working_dir": "/workspace/django__django__3.2",
  "py_interpreter_path": "/opt/miniconda3/envs/testbed/bin/python",
  "prefix": "",
  "suffix": "\n[The command completed with exit code 0.]"
})**
--BEGIN AGENT OBSERVATION--

[The command completed with exit code 0.]
[Current working directory: /workspace/django__django__3.2]
[Python interpreter: /opt/miniconda3/envs/testbed/bin/python]
[Command finished with exit code 0]
--END AGENT OBSERVATION--
2026-01-06 15:05:39,254 - INFO - FileReadAction(path='patch.diff', start=0, end=-1, thought='', action=<ActionType.READ: 'read'>, security_risk=<ActionSecurityRisk.UNKNOWN: -1>, impl_source=<FileReadSource.DEFAULT: 'default'>, view_range=None)
2026-01-06 15:05:39,281 - INFO - [Read from /workspace/django__django__3.2/patch.diff is successful.]
diff --git a/django/db/models/fields/json.py b/django/db/models/fields/json.py
index 29c6ff0926..8297901643 100644
--- a/django/db/models/fields/json.py
+++ b/django/db/models/fields/json.py
@@ -368,12 +368,22 @@ class KeyTransformIsNull(lookups.IsNull):
     def as_oracle(self, compiler, connection):
         if not self.rhs:
             return HasKey(self.lhs.lhs, self.lhs.key_name).as_oracle(compiler, connection)
-        return super().as_sql(compiler, connection)
+        # For isnull=True, check that the key does not exist (JSON_EXISTS returns FALSE)
+        lhs, lhs_params, key_transforms = self.lhs.preprocess_lhs(compiler, connection)
+        json_path = compile_json_path(key_transforms)
+        # Use NOT JSON_EXISTS to check that the key does not exist
+        return "NOT JSON_EXISTS(%s, '%s')" % (lhs, json_path), tuple(lhs_params)
 
     def as_sqlite(self, compiler, connection):
         if not self.rhs:
             return HasKey(self.lhs.lhs, self.lhs.key_name).as_sqlite(compiler, connection)
-        return super().as_sql(compiler, connection)
+        # For isnull=True, check that the key does not exist
+        lhs, lhs_params, key_transforms = self.lhs.preprocess_lhs(compiler, connection)
+        json_path = compile_json_path(key_transforms)
+        # Use JSON_TYPE IS NULL to check that the key does not exist
+        # This distinguishes between missing keys (JSON_TYPE returns NULL) 
+        # and keys with JSON null value (JSON_TYPE returns 'null')
+        return "JSON_TYPE(%s, %s) IS NULL" % (lhs, '%s'), tuple(lhs_params) + (json_path,)
 
 
 class KeyTransformIn(lookups.In):
diff --git a/final_verification.py b/final_verification.py
new file mode 100644
index 0000000000..6cb83e4efb
--- /dev/null
+++ b/final_verification.py
@@ -0,0 +1,140 @@
+#!/usr/bin/env python
+"""
+Final verification script that tests the exact scenario from the issue description.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class NullableJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'final_verification'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(NullableJSONModel)
+
+print("Final verification: Testing exact scenario from issue description...")
+
+# Create the exact test data from the issue
+print("\nCreating test data matching issue description...")
+values = [
+    None,
+    [],
+    {},
+    {'a': 'b', 'c': 14},
+    {
+        'a': 'b',
+        'c': 14,
+        'd': ['e', {'f': 'g'}],
+        'h': True,
+        'i': False,
+        'j': None,  # Key with JSON null value
+        'k': {'l': 'm'},
+        'n': [None],
+        'o': '"quoted"',
+        'p': 4.2,
+    },
+    [1, [2]],
+    {'k': True, 'l': False, 'foo': 'bax'},
+    {
+        'foo': 'bar',
+        'baz': {'a': 'b', 'c': 'd'},
+        'bar': ['foo', 'bar'],
+        'bax': {'foo': 'bar'},
+    },
+]
+
+objs = [
+    NullableJSONModel.objects.create(value=value)
+    for value in values
+]
+
+print(f"Created {len(objs)} test objects")
+
+# Test the original assertion (value__a__isnull=True)
+print("\n=== Original assertion test ===")
+results_a_isnull = NullableJSONModel.objects.filter(value__a__isnull=True)
+print(f"value__a__isnull=True found {results_a_isnull.count()} objects")
+expected_a_isnull = objs[:3] + objs[5:]  # Original expectation
+print(f"Expected: {len(expected_a_isnull)} objects (objs[:3] + objs[5:])")
+
+# Test the modified assertion from the issue (value__j__isnull=True)
+print("\n=== Modified assertion test (the actual issue) ===")
+results_j_isnull = NullableJSONModel.objects.filter(value__j__isnull=True)
+print(f"value__j__isnull=True found {results_j_isnull.count()} objects")
+expected_j_isnull = objs[:4] + objs[5:]  # Modified expectation from issue
+print(f"Expected: {len(expected_j_isnull)} objects (objs[:4] + objs[5:])")
+
+# Verify the fix
+if results_j_isnull.count() == len(expected_j_isnull):
+    print("✓ PASS: Issue has been FIXED!")
+    print("  value__j__isnull=True correctly returns objects without key 'j'")
+    print("  It does NOT incorrectly include the object with key 'j' having JSON null value")
+else:
+    print("✗ FAIL: Issue still exists")
+    print(f"  Got {results_j_isnull.count()} objects, expected {len(expected_j_isnull)}")
+
+# Show which objects have the 'j' key
+print("\n=== Analysis of 'j' key ===")
+print("Objects WITH key 'j':")
+for i, obj in enumerate(objs):
+    if obj.value and isinstance(obj.value, dict) and 'j' in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+print("Objects WITHOUT key 'j':")
+for i, obj in enumerate(objs):
+    if not obj.value or not isinstance(obj.value, dict) or 'j' not in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+# Verify the behavior is correct
+print("\n=== Behavior Verification ===")
+print("✓ value__j__isnull=True should match objects WITHOUT key 'j'")
+print("✓ value__j__isnull=False should match objects WITH key 'j' (regardless of value)")
+
+results_j_notnull = NullableJSONModel.objects.filter(value__j__isnull=False)
+print(f"\nvalue__j__isnull=False found {results_j_notnull.count()} objects:")
+for obj in results_j_notnull:
+    print(f"  {obj.value}")
+
+if results_j_notnull.count() == 1:
+    print("✓ PASS: value__j__isnull=False correctly returns 1 object with key 'j'")
+else:
+    print(f"✗ FAIL: value__j__isnull=False returned {results_j_notnull.count()}, expected 1")
+
+print("\n=== Summary ===")
+print("The fix correctly distinguishes between:")
+print("1. Missing keys (JSON_TYPE returns NULL)")
+print("2. Keys with JSON null value (JSON_TYPE returns 'null')")
+print("3. Keys with other values (JSON_TYPE returns their type)")
+
+print("\n✓ Issue has been successfully resolved!")
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..710899be5f
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,103 @@
+#!/usr/bin/env python
+"""
+Reproduction script for KeyTransformIsNull issue.
+
+The issue: Using __isnull=True on a KeyTransform should not match JSON null 
+on SQLite and Oracle, but it currently does.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+            'tests.model_fields',
+        ],
+        SECRET_KEY='test-secret-key',
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class TestJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_reproduce'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(TestJSONModel)
+
+# Create test data
+print("Creating test data...")
+test_objects = [
+    TestJSONModel.objects.create(value=None),  # No JSON at all
+    TestJSONModel.objects.create(value={}),    # Empty JSON object
+    TestJSONModel.objects.create(value={'a': 'b'}),  # Has key 'a' with value
+    TestJSONModel.objects.create(value={'j': None}),  # Has key 'j' with JSON null
+    TestJSONModel.objects.create(value={'other': 'value'}),  # Has other key, no 'j'
+]
+
+print(f"Created {len(test_objects)} test objects")
+
+# Test the issue
+print("\nTesting value__j__isnull=True:")
+results_j_isnull = TestJSONModel.objects.filter(value__j__isnull=True)
+print(f"Found {results_j_isnull.count()} objects:")
+for obj in results_j_isnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+print("\nTesting value__j__isnull=False:")
+results_j_notnull = TestJSONModel.objects.filter(value__j__isnull=False)
+print(f"Found {results_j_notnull.count()} objects:")
+for obj in results_j_notnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+print("\nExpected behavior:")
+print("value__j__isnull=True should match objects that do NOT have key 'j'")
+print("value__j__isnull=False should match objects that DO have key 'j'")
+
+print("\nActual results:")
+print("Objects without key 'j': IDs 1, 2, 3, 5")
+print("Objects with key 'j': ID 4 (value is JSON null)")
+
+if results_j_isnull.count() == 4:
+    print("✓ CORRECT: value__j__isnull=True returns 4 objects (without key 'j')")
+else:
+    print(f"✗ INCORRECT: value__j__isnull=True returns {results_j_isnull.count()} objects (should be 4)")
+
+if results_j_notnull.count() == 1:
+    print("✓ CORRECT: value__j__isnull=False returns 1 object (with key 'j')")
+else:
+    print(f"✗ INCORRECT: value__j__isnull=False returns {results_j_notnull.count()} objects (should be 1)")
+
+# Let's also check what SQL is being generated
+print("\nGenerated SQL for value__j__isnull=True:")
+queryset = TestJSONModel.objects.filter(value__j__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL: {sql}")
+print(f"Params: {params}")
+
+print("\nGenerated SQL for value__j__isnull=False:")
+queryset = TestJSONModel.objects.filter(value__j__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL: {sql}")
+print(f"Params: {params}")
diff --git a/test_clean.py b/test_clean.py
new file mode 100644
index 0000000000..448554bd48
--- /dev/null
+++ b/test_clean.py
@@ -0,0 +1,111 @@
+#!/usr/bin/env python
+"""
+Clean test to verify KeyTransformIsNull fix.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class TestJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_clean'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(TestJSONModel)
+
+print("Testing KeyTransformIsNull fix...")
+
+# Clear any existing data
+TestJSONModel.objects.all().delete()
+
+# Create specific test cases
+print("\nCreating test objects...")
+obj1 = TestJSONModel.objects.create(value=None)  # No JSON at all
+obj2 = TestJSONModel.objects.create(value={})    # Empty JSON object
+obj3 = TestJSONModel.objects.create(value={'other': 'value'})  # No 'test' key
+obj4 = TestJSONModel.objects.create(value={'test': None})  # 'test' key with JSON null
+obj5 = TestJSONModel.objects.create(value={'test': 'value'})  # 'test' key with real value
+
+print(f"Created 5 test objects")
+
+# Test the key 'test' with isnull=True
+print("\n=== Testing value__test__isnull=True ===")
+results_isnull = TestJSONModel.objects.filter(value__test__isnull=True)
+print(f"Found {results_isnull.count()} objects:")
+for obj in results_isnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+# Expected: objects 1, 2, 3 (no 'test' key)
+expected_count = 3
+if results_isnull.count() == expected_count:
+    print(f"✓ PASS: Found expected {expected_count} objects without 'test' key")
+else:
+    print(f"✗ FAIL: Found {results_isnull.count()} objects, expected {expected_count}")
+
+# Test the key 'test' with isnull=False
+print("\n=== Testing value__test__isnull=False ===")
+results_notnull = TestJSONModel.objects.filter(value__test__isnull=False)
+print(f"Found {results_notnull.count()} objects:")
+for obj in results_notnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+# Expected: objects 4, 5 (have 'test' key, regardless of value)
+expected_count = 2
+if results_notnull.count() == expected_count:
+    print(f"✓ PASS: Found expected {expected_count} objects with 'test' key")
+else:
+    print(f"✗ FAIL: Found {results_notnull.count()} objects, expected {expected_count}")
+
+# Verify the specific objects
+print("\n=== Verification ===")
+print("Objects without 'test' key (should match isnull=True):")
+for obj in [obj1, obj2, obj3]:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+print("Objects with 'test' key (should match isnull=False):")
+for obj in [obj4, obj5]:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+# Show SQL
+print("\n=== Generated SQL ===")
+queryset = TestJSONModel.objects.filter(value__test__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"value__test__isnull=True: {sql}")
+print(f"Params: {params}")
+
+queryset = TestJSONModel.objects.filter(value__test__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"value__test__isnull=False: {sql}")
+print(f"Params: {params}")
+
+print("\n✓ Test completed!")
diff --git a/test_comprehensive.py b/test_comprehensive.py
new file mode 100644
index 0000000000..9ae51eb4f5
--- /dev/null
+++ b/test_comprehensive.py
@@ -0,0 +1,142 @@
+#!/usr/bin/env python
+"""
+Comprehensive test script for KeyTransformIsNull fix.
+This includes the test case mentioned in the issue description.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+            'tests.model_fields',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class NullableJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_comprehensive'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(NullableJSONModel)
+
+# Create test data matching the issue description
+print("Creating test data matching the issue description...")
+values = [
+    None,
+    [],
+    {},
+    {'a': 'b', 'c': 14},
+    {
+        'a': 'b',
+        'c': 14,
+        'd': ['e', {'f': 'g'}],
+        'h': True,
+        'i': False,
+        'j': None,  # This is the key with JSON null value
+        'k': {'l': 'm'},
+        'n': [None],
+        'o': '"quoted"',
+        'p': 4.2,
+    },
+    [1, [2]],
+    {'k': True, 'l': False, 'foo': 'bax'},
+    {
+        'foo': 'bar',
+        'baz': {'a': 'b', 'c': 'd'},
+        'bar': ['foo', 'bar'],
+        'bax': {'foo': 'bar'},
+    },
+]
+
+objs = [
+    NullableJSONModel.objects.create(value=value)
+    for value in values
+]
+
+print(f"Created {len(objs)} test objects")
+
+# Test the original assertion from the issue (value__a__isnull=True)
+print("\n=== Testing original assertion (value__a__isnull=True) ===")
+results_a_isnull = NullableJSONModel.objects.filter(value__a__isnull=True)
+print(f"value__a__isnull=True found {results_a_isnull.count()} objects")
+expected_a_isnull = objs[:3] + objs[5:]  # Original expectation
+print(f"Expected: {len(expected_a_isnull)} objects (objs[:3] + objs[5:])")
+
+# Test the modified assertion from the issue (value__j__isnull=True)
+print("\n=== Testing modified assertion (value__j__isnull=True) ===")
+results_j_isnull = NullableJSONModel.objects.filter(value__j__isnull=True)
+print(f"value__j__isnull=True found {results_j_isnull.count()} objects")
+expected_j_isnull = objs[:4] + objs[5:]  # Modified expectation from issue
+print(f"Expected: {len(expected_j_isnull)} objects (objs[:4] + objs[5:])")
+
+# Verify the results
+print("\n=== Detailed Analysis ===")
+print("Objects with key 'j':")
+for i, obj in enumerate(objs):
+    if obj.value and isinstance(obj.value, dict) and 'j' in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+print("\nObjects without key 'j':")
+for i, obj in enumerate(objs):
+    if not obj.value or not isinstance(obj.value, dict) or 'j' not in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+print("\n=== Test Results ===")
+if results_j_isnull.count() == len(expected_j_isnull):
+    print("✓ PASS: value__j__isnull=True returns correct number of objects")
+else:
+    print(f"✗ FAIL: value__j__isnull=True returns {results_j_isnull.count()}, expected {len(expected_j_isnull)}")
+
+# Test isnull=False as well
+print("\n=== Testing value__j__isnull=False ===")
+results_j_notnull = NullableJSONModel.objects.filter(value__j__isnull=False)
+print(f"value__j__isnull=False found {results_j_notnull.count()} objects")
+if results_j_notnull.count() == 1:
+    print("✓ PASS: value__j__isnull=False returns 1 object (with key 'j')")
+else:
+    print(f"✗ FAIL: value__j__isnull=False returns {results_j_notnull.count()}, expected 1")
+
+# Test other keys to ensure no regression
+print("\n=== Testing other keys for regression ===")
+for key in ['a', 'k', 'foo']:
+    isnull_count = NullableJSONModel.objects.filter(**{f'value__{key}__isnull': True}).count()
+    notnull_count = NullableJSONModel.objects.filter(**{f'value__{key}__isnull': False}).count()
+    print(f"Key '{key}': isnull=True={isnull_count}, isnull=False={notnull_count}")
+
+print("\n=== Generated SQL ===")
+# Show SQL for the key case
+queryset = NullableJSONModel.objects.filter(value__j__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"value__j__isnull=True SQL: {sql}")
+print(f"Params: {params}")
+
+queryset = NullableJSONModel.objects.filter(value__j__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"value__j__isnull=False SQL: {sql}")
+print(f"Params: {params}")
diff --git a/test_edge_cases.py b/test_edge_cases.py
new file mode 100644
index 0000000000..c82e9b9024
--- /dev/null
+++ b/test_edge_cases.py
@@ -0,0 +1,105 @@
+#!/usr/bin/env python
+"""
+Edge case tests for KeyTransformIsNull fix.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+            'tests.model_fields',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class TestJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_edge_cases'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(TestJSONModel)
+
+print("Testing edge cases for KeyTransformIsNull...")
+
+# Test case 1: Nested keys
+print("\n=== Test Case 1: Nested keys ===")
+TestJSONModel.objects.create(value={'a': {'b': None}})
+TestJSONModel.objects.create(value={'a': {'c': 'value'}})
+TestJSONModel.objects.create(value={'x': 'y'})
+
+results = TestJSONModel.objects.filter(value__a__b__isnull=True)
+print(f"value__a__b__isnull=True: {results.count()} objects")
+for obj in results:
+    print(f"  {obj.value}")
+
+# Test case 2: Array indices
+print("\n=== Test Case 2: Array indices ===")
+TestJSONModel.objects.create(value={'items': [None, 'value']})
+TestJSONModel.objects.create(value={'items': ['value1', 'value2']})
+TestJSONModel.objects.create(value={'other': 'data'})
+
+results = TestJSONModel.objects.filter(value__items__0__isnull=True)
+print(f"value__items__0__isnull=True: {results.count()} objects")
+for obj in results:
+    print(f"  {obj.value}")
+
+# Test case 3: Mixed null and non-null values
+print("\n=== Test Case 3: Mixed null and non-null values ===")
+TestJSONModel.objects.create(value={'key': None})
+TestJSONModel.objects.create(value={'key': 'not null'})
+TestJSONModel.objects.create(value={'other_key': 'value'})
+
+results_null = TestJSONModel.objects.filter(value__key__isnull=True)
+results_notnull = TestJSONModel.objects.filter(value__key__isnull=False)
+print(f"value__key__isnull=True: {results_null.count()} objects")
+print(f"value__key__isnull=False: {results_notnull.count()} objects")
+
+# Test case 4: Deeply nested structures
+print("\n=== Test Case 4: Deeply nested structures ===")
+TestJSONModel.objects.create(value={'level1': {'level2': {'level3': None}}})
+TestJSONModel.objects.create(value={'level1': {'level2': {'level3': 'value'}}})
+TestJSONModel.objects.create(value={'level1': {'other': 'data'}})
+
+results = TestJSONModel.objects.filter(value__level1__level2__level3__isnull=True)
+print(f"value__level1__level2__level3__isnull=True: {results.count()} objects")
+for obj in results:
+    print(f"  {obj.value}")
+
+# Test case 5: Verify SQL generation
+print("\n=== Test Case 5: SQL Generation ===")
+queryset = TestJSONModel.objects.filter(value__key__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL for isnull=True: {sql}")
+print(f"Params: {params}")
+
+queryset = TestJSONModel.objects.filter(value__key__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL for isnull=False: {sql}")
+print(f"Params: {params}")
+
+print("\n✓ All edge case tests completed successfully!")

2026-01-06 15:05:39,282 - INFO - ------------------------------
2026-01-06 15:05:39,282 - INFO - END Runtime Completion Fn
2026-01-06 15:05:39,282 - INFO - ------------------------------
2026-01-06 15:05:39,282 - INFO - Got git diff for instance django__django-13757:
--------
diff --git a/django/db/models/fields/json.py b/django/db/models/fields/json.py
index 29c6ff0926..8297901643 100644
--- a/django/db/models/fields/json.py
+++ b/django/db/models/fields/json.py
@@ -368,12 +368,22 @@ class KeyTransformIsNull(lookups.IsNull):
     def as_oracle(self, compiler, connection):
         if not self.rhs:
             return HasKey(self.lhs.lhs, self.lhs.key_name).as_oracle(compiler, connection)
-        return super().as_sql(compiler, connection)
+        # For isnull=True, check that the key does not exist (JSON_EXISTS returns FALSE)
+        lhs, lhs_params, key_transforms = self.lhs.preprocess_lhs(compiler, connection)
+        json_path = compile_json_path(key_transforms)
+        # Use NOT JSON_EXISTS to check that the key does not exist
+        return "NOT JSON_EXISTS(%s, '%s')" % (lhs, json_path), tuple(lhs_params)
 
     def as_sqlite(self, compiler, connection):
         if not self.rhs:
             return HasKey(self.lhs.lhs, self.lhs.key_name).as_sqlite(compiler, connection)
-        return super().as_sql(compiler, connection)
+        # For isnull=True, check that the key does not exist
+        lhs, lhs_params, key_transforms = self.lhs.preprocess_lhs(compiler, connection)
+        json_path = compile_json_path(key_transforms)
+        # Use JSON_TYPE IS NULL to check that the key does not exist
+        # This distinguishes between missing keys (JSON_TYPE returns NULL) 
+        # and keys with JSON null value (JSON_TYPE returns 'null')
+        return "JSON_TYPE(%s, %s) IS NULL" % (lhs, '%s'), tuple(lhs_params) + (json_path,)
 
 
 class KeyTransformIn(lookups.In):
diff --git a/final_verification.py b/final_verification.py
new file mode 100644
index 0000000000..6cb83e4efb
--- /dev/null
+++ b/final_verification.py
@@ -0,0 +1,140 @@
+#!/usr/bin/env python
+"""
+Final verification script that tests the exact scenario from the issue description.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class NullableJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'final_verification'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(NullableJSONModel)
+
+print("Final verification: Testing exact scenario from issue description...")
+
+# Create the exact test data from the issue
+print("\nCreating test data matching issue description...")
+values = [
+    None,
+    [],
+    {},
+    {'a': 'b', 'c': 14},
+    {
+        'a': 'b',
+        'c': 14,
+        'd': ['e', {'f': 'g'}],
+        'h': True,
+        'i': False,
+        'j': None,  # Key with JSON null value
+        'k': {'l': 'm'},
+        'n': [None],
+        'o': '"quoted"',
+        'p': 4.2,
+    },
+    [1, [2]],
+    {'k': True, 'l': False, 'foo': 'bax'},
+    {
+        'foo': 'bar',
+        'baz': {'a': 'b', 'c': 'd'},
+        'bar': ['foo', 'bar'],
+        'bax': {'foo': 'bar'},
+    },
+]
+
+objs = [
+    NullableJSONModel.objects.create(value=value)
+    for value in values
+]
+
+print(f"Created {len(objs)} test objects")
+
+# Test the original assertion (value__a__isnull=True)
+print("\n=== Original assertion test ===")
+results_a_isnull = NullableJSONModel.objects.filter(value__a__isnull=True)
+print(f"value__a__isnull=True found {results_a_isnull.count()} objects")
+expected_a_isnull = objs[:3] + objs[5:]  # Original expectation
+print(f"Expected: {len(expected_a_isnull)} objects (objs[:3] + objs[5:])")
+
+# Test the modified assertion from the issue (value__j__isnull=True)
+print("\n=== Modified assertion test (the actual issue) ===")
+results_j_isnull = NullableJSONModel.objects.filter(value__j__isnull=True)
+print(f"value__j__isnull=True found {results_j_isnull.count()} objects")
+expected_j_isnull = objs[:4] + objs[5:]  # Modified expectation from issue
+print(f"Expected: {len(expected_j_isnull)} objects (objs[:4] + objs[5:])")
+
+# Verify the fix
+if results_j_isnull.count() == len(expected_j_isnull):
+    print("✓ PASS: Issue has been FIXED!")
+    print("  value__j__isnull=True correctly returns objects without key 'j'")
+    print("  It does NOT incorrectly include the object with key 'j' having JSON null value")
+else:
+    print("✗ FAIL: Issue still exists")
+    print(f"  Got {results_j_isnull.count()} objects, expected {len(expected_j_isnull)}")
+
+# Show which objects have the 'j' key
+print("\n=== Analysis of 'j' key ===")
+print("Objects WITH key 'j':")
+for i, obj in enumerate(objs):
+    if obj.value and isinstance(obj.value, dict) and 'j' in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+print("Objects WITHOUT key 'j':")
+for i, obj in enumerate(objs):
+    if not obj.value or not isinstance(obj.value, dict) or 'j' not in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+# Verify the behavior is correct
+print("\n=== Behavior Verification ===")
+print("✓ value__j__isnull=True should match objects WITHOUT key 'j'")
+print("✓ value__j__isnull=False should match objects WITH key 'j' (regardless of value)")
+
+results_j_notnull = NullableJSONModel.objects.filter(value__j__isnull=False)
+print(f"\nvalue__j__isnull=False found {results_j_notnull.count()} objects:")
+for obj in results_j_notnull:
+    print(f"  {obj.value}")
+
+if results_j_notnull.count() == 1:
+    print("✓ PASS: value__j__isnull=False correctly returns 1 object with key 'j'")
+else:
+    print(f"✗ FAIL: value__j__isnull=False returned {results_j_notnull.count()}, expected 1")
+
+print("\n=== Summary ===")
+print("The fix correctly distinguishes between:")
+print("1. Missing keys (JSON_TYPE returns NULL)")
+print("2. Keys with JSON null value (JSON_TYPE returns 'null')")
+print("3. Keys with other values (JSON_TYPE returns their type)")
+
+print("\n✓ Issue has been successfully resolved!")
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..710899be5f
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,103 @@
+#!/usr/bin/env python
+"""
+Reproduction script for KeyTransformIsNull issue.
+
+The issue: Using __isnull=True on a KeyTransform should not match JSON null 
+on SQLite and Oracle, but it currently does.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+            'tests.model_fields',
+        ],
+        SECRET_KEY='test-secret-key',
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class TestJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_reproduce'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(TestJSONModel)
+
+# Create test data
+print("Creating test data...")
+test_objects = [
+    TestJSONModel.objects.create(value=None),  # No JSON at all
+    TestJSONModel.objects.create(value={}),    # Empty JSON object
+    TestJSONModel.objects.create(value={'a': 'b'}),  # Has key 'a' with value
+    TestJSONModel.objects.create(value={'j': None}),  # Has key 'j' with JSON null
+    TestJSONModel.objects.create(value={'other': 'value'}),  # Has other key, no 'j'
+]
+
+print(f"Created {len(test_objects)} test objects")
+
+# Test the issue
+print("\nTesting value__j__isnull=True:")
+results_j_isnull = TestJSONModel.objects.filter(value__j__isnull=True)
+print(f"Found {results_j_isnull.count()} objects:")
+for obj in results_j_isnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+print("\nTesting value__j__isnull=False:")
+results_j_notnull = TestJSONModel.objects.filter(value__j__isnull=False)
+print(f"Found {results_j_notnull.count()} objects:")
+for obj in results_j_notnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+print("\nExpected behavior:")
+print("value__j__isnull=True should match objects that do NOT have key 'j'")
+print("value__j__isnull=False should match objects that DO have key 'j'")
+
+print("\nActual results:")
+print("Objects without key 'j': IDs 1, 2, 3, 5")
+print("Objects with key 'j': ID 4 (value is JSON null)")
+
+if results_j_isnull.count() == 4:
+    print("✓ CORRECT: value__j__isnull=True returns 4 objects (without key 'j')")
+else:
+    print(f"✗ INCORRECT: value__j__isnull=True returns {results_j_isnull.count()} objects (should be 4)")
+
+if results_j_notnull.count() == 1:
+    print("✓ CORRECT: value__j__isnull=False returns 1 object (with key 'j')")
+else:
+    print(f"✗ INCORRECT: value__j__isnull=False returns {results_j_notnull.count()} objects (should be 1)")
+
+# Let's also check what SQL is being generated
+print("\nGenerated SQL for value__j__isnull=True:")
+queryset = TestJSONModel.objects.filter(value__j__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL: {sql}")
+print(f"Params: {params}")
+
+print("\nGenerated SQL for value__j__isnull=False:")
+queryset = TestJSONModel.objects.filter(value__j__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL: {sql}")
+print(f"Params: {params}")
diff --git a/test_clean.py b/test_clean.py
new file mode 100644
index 0000000000..448554bd48
--- /dev/null
+++ b/test_clean.py
@@ -0,0 +1,111 @@
+#!/usr/bin/env python
+"""
+Clean test to verify KeyTransformIsNull fix.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class TestJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_clean'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(TestJSONModel)
+
+print("Testing KeyTransformIsNull fix...")
+
+# Clear any existing data
+TestJSONModel.objects.all().delete()
+
+# Create specific test cases
+print("\nCreating test objects...")
+obj1 = TestJSONModel.objects.create(value=None)  # No JSON at all
+obj2 = TestJSONModel.objects.create(value={})    # Empty JSON object
+obj3 = TestJSONModel.objects.create(value={'other': 'value'})  # No 'test' key
+obj4 = TestJSONModel.objects.create(value={'test': None})  # 'test' key with JSON null
+obj5 = TestJSONModel.objects.create(value={'test': 'value'})  # 'test' key with real value
+
+print(f"Created 5 test objects")
+
+# Test the key 'test' with isnull=True
+print("\n=== Testing value__test__isnull=True ===")
+results_isnull = TestJSONModel.objects.filter(value__test__isnull=True)
+print(f"Found {results_isnull.count()} objects:")
+for obj in results_isnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+# Expected: objects 1, 2, 3 (no 'test' key)
+expected_count = 3
+if results_isnull.count() == expected_count:
+    print(f"✓ PASS: Found expected {expected_count} objects without 'test' key")
+else:
+    print(f"✗ FAIL: Found {results_isnull.count()} objects, expected {expected_count}")
+
+# Test the key 'test' with isnull=False
+print("\n=== Testing value__test__isnull=False ===")
+results_notnull = TestJSONModel.objects.filter(value__test__isnull=False)
+print(f"Found {results_notnull.count()} objects:")
+for obj in results_notnull:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+# Expected: objects 4, 5 (have 'test' key, regardless of value)
+expected_count = 2
+if results_notnull.count() == expected_count:
+    print(f"✓ PASS: Found expected {expected_count} objects with 'test' key")
+else:
+    print(f"✗ FAIL: Found {results_notnull.count()} objects, expected {expected_count}")
+
+# Verify the specific objects
+print("\n=== Verification ===")
+print("Objects without 'test' key (should match isnull=True):")
+for obj in [obj1, obj2, obj3]:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+print("Objects with 'test' key (should match isnull=False):")
+for obj in [obj4, obj5]:
+    print(f"  ID: {obj.id}, value: {obj.value}")
+
+# Show SQL
+print("\n=== Generated SQL ===")
+queryset = TestJSONModel.objects.filter(value__test__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"value__test__isnull=True: {sql}")
+print(f"Params: {params}")
+
+queryset = TestJSONModel.objects.filter(value__test__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"value__test__isnull=False: {sql}")
+print(f"Params: {params}")
+
+print("\n✓ Test completed!")
diff --git a/test_comprehensive.py b/test_comprehensive.py
new file mode 100644
index 0000000000..9ae51eb4f5
--- /dev/null
+++ b/test_comprehensive.py
@@ -0,0 +1,142 @@
+#!/usr/bin/env python
+"""
+Comprehensive test script for KeyTransformIsNull fix.
+This includes the test case mentioned in the issue description.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+            'tests.model_fields',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class NullableJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_comprehensive'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(NullableJSONModel)
+
+# Create test data matching the issue description
+print("Creating test data matching the issue description...")
+values = [
+    None,
+    [],
+    {},
+    {'a': 'b', 'c': 14},
+    {
+        'a': 'b',
+        'c': 14,
+        'd': ['e', {'f': 'g'}],
+        'h': True,
+        'i': False,
+        'j': None,  # This is the key with JSON null value
+        'k': {'l': 'm'},
+        'n': [None],
+        'o': '"quoted"',
+        'p': 4.2,
+    },
+    [1, [2]],
+    {'k': True, 'l': False, 'foo': 'bax'},
+    {
+        'foo': 'bar',
+        'baz': {'a': 'b', 'c': 'd'},
+        'bar': ['foo', 'bar'],
+        'bax': {'foo': 'bar'},
+    },
+]
+
+objs = [
+    NullableJSONModel.objects.create(value=value)
+    for value in values
+]
+
+print(f"Created {len(objs)} test objects")
+
+# Test the original assertion from the issue (value__a__isnull=True)
+print("\n=== Testing original assertion (value__a__isnull=True) ===")
+results_a_isnull = NullableJSONModel.objects.filter(value__a__isnull=True)
+print(f"value__a__isnull=True found {results_a_isnull.count()} objects")
+expected_a_isnull = objs[:3] + objs[5:]  # Original expectation
+print(f"Expected: {len(expected_a_isnull)} objects (objs[:3] + objs[5:])")
+
+# Test the modified assertion from the issue (value__j__isnull=True)
+print("\n=== Testing modified assertion (value__j__isnull=True) ===")
+results_j_isnull = NullableJSONModel.objects.filter(value__j__isnull=True)
+print(f"value__j__isnull=True found {results_j_isnull.count()} objects")
+expected_j_isnull = objs[:4] + objs[5:]  # Modified expectation from issue
+print(f"Expected: {len(expected_j_isnull)} objects (objs[:4] + objs[5:])")
+
+# Verify the results
+print("\n=== Detailed Analysis ===")
+print("Objects with key 'j':")
+for i, obj in enumerate(objs):
+    if obj.value and isinstance(obj.value, dict) and 'j' in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+print("\nObjects without key 'j':")
+for i, obj in enumerate(objs):
+    if not obj.value or not isinstance(obj.value, dict) or 'j' not in obj.value:
+        print(f"  obj[{i}]: {obj.value}")
+
+print("\n=== Test Results ===")
+if results_j_isnull.count() == len(expected_j_isnull):
+    print("✓ PASS: value__j__isnull=True returns correct number of objects")
+else:
+    print(f"✗ FAIL: value__j__isnull=True returns {results_j_isnull.count()}, expected {len(expected_j_isnull)}")
+
+# Test isnull=False as well
+print("\n=== Testing value__j__isnull=False ===")
+results_j_notnull = NullableJSONModel.objects.filter(value__j__isnull=False)
+print(f"value__j__isnull=False found {results_j_notnull.count()} objects")
+if results_j_notnull.count() == 1:
+    print("✓ PASS: value__j__isnull=False returns 1 object (with key 'j')")
+else:
+    print(f"✗ FAIL: value__j__isnull=False returns {results_j_notnull.count()}, expected 1")
+
+# Test other keys to ensure no regression
+print("\n=== Testing other keys for regression ===")
+for key in ['a', 'k', 'foo']:
+    isnull_count = NullableJSONModel.objects.filter(**{f'value__{key}__isnull': True}).count()
+    notnull_count = NullableJSONModel.objects.filter(**{f'value__{key}__isnull': False}).count()
+    print(f"Key '{key}': isnull=True={isnull_count}, isnull=False={notnull_count}")
+
+print("\n=== Generated SQL ===")
+# Show SQL for the key case
+queryset = NullableJSONModel.objects.filter(value__j__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"value__j__isnull=True SQL: {sql}")
+print(f"Params: {params}")
+
+queryset = NullableJSONModel.objects.filter(value__j__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"value__j__isnull=False SQL: {sql}")
+print(f"Params: {params}")
diff --git a/test_edge_cases.py b/test_edge_cases.py
new file mode 100644
index 0000000000..c82e9b9024
--- /dev/null
+++ b/test_edge_cases.py
@@ -0,0 +1,105 @@
+#!/usr/bin/env python
+"""
+Edge case tests for KeyTransformIsNull fix.
+"""
+
+import os
+import sys
+import django
+from django.conf import settings
+
+# Configure Django settings
+if not settings.configured:
+    settings.configure(
+        DEBUG=True,
+        DATABASES={
+            'default': {
+                'ENGINE': 'django.db.backends.sqlite3',
+                'NAME': ':memory:',
+            }
+        },
+        INSTALLED_APPS=[
+            'django.contrib.contenttypes',
+            'django.contrib.auth',
+            'tests.model_fields',
+        ],
+        SECRET_KEY='test-secret-key',
+        USE_TZ=True,
+    )
+
+django.setup()
+
+from django.db import connection, models
+from django.db.models import JSONField
+
+
+class TestJSONModel(models.Model):
+    value = JSONField(null=True)
+    
+    class Meta:
+        app_label = 'test_edge_cases'
+
+
+# Create the table
+with connection.schema_editor() as schema_editor:
+    schema_editor.create_model(TestJSONModel)
+
+print("Testing edge cases for KeyTransformIsNull...")
+
+# Test case 1: Nested keys
+print("\n=== Test Case 1: Nested keys ===")
+TestJSONModel.objects.create(value={'a': {'b': None}})
+TestJSONModel.objects.create(value={'a': {'c': 'value'}})
+TestJSONModel.objects.create(value={'x': 'y'})
+
+results = TestJSONModel.objects.filter(value__a__b__isnull=True)
+print(f"value__a__b__isnull=True: {results.count()} objects")
+for obj in results:
+    print(f"  {obj.value}")
+
+# Test case 2: Array indices
+print("\n=== Test Case 2: Array indices ===")
+TestJSONModel.objects.create(value={'items': [None, 'value']})
+TestJSONModel.objects.create(value={'items': ['value1', 'value2']})
+TestJSONModel.objects.create(value={'other': 'data'})
+
+results = TestJSONModel.objects.filter(value__items__0__isnull=True)
+print(f"value__items__0__isnull=True: {results.count()} objects")
+for obj in results:
+    print(f"  {obj.value}")
+
+# Test case 3: Mixed null and non-null values
+print("\n=== Test Case 3: Mixed null and non-null values ===")
+TestJSONModel.objects.create(value={'key': None})
+TestJSONModel.objects.create(value={'key': 'not null'})
+TestJSONModel.objects.create(value={'other_key': 'value'})
+
+results_null = TestJSONModel.objects.filter(value__key__isnull=True)
+results_notnull = TestJSONModel.objects.filter(value__key__isnull=False)
+print(f"value__key__isnull=True: {results_null.count()} objects")
+print(f"value__key__isnull=False: {results_notnull.count()} objects")
+
+# Test case 4: Deeply nested structures
+print("\n=== Test Case 4: Deeply nested structures ===")
+TestJSONModel.objects.create(value={'level1': {'level2': {'level3': None}}})
+TestJSONModel.objects.create(value={'level1': {'level2': {'level3': 'value'}}})
+TestJSONModel.objects.create(value={'level1': {'other': 'data'}})
+
+results = TestJSONModel.objects.filter(value__level1__level2__level3__isnull=True)
+print(f"value__level1__level2__level3__isnull=True: {results.count()} objects")
+for obj in results:
+    print(f"  {obj.value}")
+
+# Test case 5: Verify SQL generation
+print("\n=== Test Case 5: SQL Generation ===")
+queryset = TestJSONModel.objects.filter(value__key__isnull=True)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL for isnull=True: {sql}")
+print(f"Params: {params}")
+
+queryset = TestJSONModel.objects.filter(value__key__isnull=False)
+sql, params = queryset.query.sql_with_params()
+print(f"SQL for isnull=False: {sql}")
+print(f"Params: {params}")
+
+print("\n✓ All edge case tests completed successfully!")
--------
2026-01-06 15:05:46,380 - INFO - Using instance container image: docker.io/swebench/sweb.eval.x86_64.django_1776_django-15320:latest. Please make sure this image exists. Submit an issue on https://github.com/OpenHands/OpenHands if you run into any issues.
2026-01-06 15:05:46,382 - INFO - Resource mapping for princeton-nlp__SWE-bench_Lite-test not found.
2026-01-06 15:05:46,383 - INFO - Logging LLM completions for instance django__django-15320 to ./continuum32/princeton-nlp__SWE-bench_Lite-test/CodeActAgent/GLM-4.6-FP8_maxiter_135/llm_completions/django__django-15320
2026-01-06 15:05:46,383 - INFO - Config file not found: config.toml. Error: [Errno 2] No such file or directory: 'config.toml'
2026-01-06 15:05:46,383 - INFO - Config file not found: [Errno 2] No such file or directory: 'config.toml'. Toml values have not been applied.
